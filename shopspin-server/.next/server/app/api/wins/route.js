/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/wins/route";
exports.ids = ["app/api/wins/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwins%2Froute&page=%2Fapi%2Fwins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwins%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwins%2Froute&page=%2Fapi%2Fwins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwins%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_samchou_Sweepstakes_Google_Extension_shopspin_server_src_app_api_wins_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/wins/route.ts */ \"(rsc)/./src/app/api/wins/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/wins/route\",\n        pathname: \"/api/wins\",\n        filename: \"route\",\n        bundlePath: \"app/api/wins/route\"\n    },\n    resolvedPagePath: \"/Users/samchou/Sweepstakes Google Extension/shopspin-server/src/app/api/wins/route.ts\",\n    nextConfigOutput,\n    userland: _Users_samchou_Sweepstakes_Google_Extension_shopspin_server_src_app_api_wins_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ3aW5zJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ3aW5zJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGd2lucyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNhbWNob3UlMkZTd2VlcHN0YWtlcyUyMEdvb2dsZSUyMEV4dGVuc2lvbiUyRnNob3BzcGluLXNlcnZlciUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzYW1jaG91JTJGU3dlZXBzdGFrZXMlMjBHb29nbGUlMjBFeHRlbnNpb24lMkZzaG9wc3Bpbi1zZXJ2ZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3FDO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2FtY2hvdS9Td2VlcHN0YWtlcyBHb29nbGUgRXh0ZW5zaW9uL3Nob3BzcGluLXNlcnZlci9zcmMvYXBwL2FwaS93aW5zL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS93aW5zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvd2luc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvd2lucy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9zYW1jaG91L1N3ZWVwc3Rha2VzIEdvb2dsZSBFeHRlbnNpb24vc2hvcHNwaW4tc2VydmVyL3NyYy9hcHAvYXBpL3dpbnMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwins%2Froute&page=%2Fapi%2Fwins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwins%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/wins/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/wins/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database-prisma */ \"(rsc)/./src/lib/database-prisma.ts\");\n\n\nasync function POST(request) {\n    console.log('ðŸŽ° SERVER: Win recording request received');\n    try {\n        const winData = await request.json();\n        console.log('ðŸŽ° SERVER: Win data:', {\n            userId: winData.userId,\n            productName: winData.product?.name,\n            stake: winData.stakeAmount\n        });\n        // Validate required fields\n        if (!winData.userId || !winData.product || !winData.stakeAmount || !winData.probability) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Missing required fields: userId, product, stakeAmount, and probability are required'\n            }, {\n                status: 400\n            });\n        }\n        // Verify user exists\n        const user = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.getUserById(winData.userId);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'User not found'\n            }, {\n                status: 404\n            });\n        }\n        // Create win record\n        const newWin = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.createWin({\n            userId: winData.userId,\n            product: winData.product,\n            stakeAmount: winData.stakeAmount,\n            probability: winData.probability,\n            winTimestamp: new Date(),\n            status: 'pending'\n        });\n        console.log(`ðŸŽ° NEW WIN RECORDED! User: ${user.email}, Product: ${winData.product.name}, Stake: $${winData.stakeAmount}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: newWin,\n            message: 'Win recorded successfully'\n        });\n    } catch (error) {\n        console.error('Error recording win:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const userId = searchParams.get('userId');\n        if (userId) {\n            const wins = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.getWinsByUserId(userId);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: wins\n            });\n        }\n        // Get all wins for admin dashboard\n        const allWins = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.getAllWins();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: allWins\n        });\n    } catch (error) {\n        console.error('Error fetching wins:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bnNpb24vc2hvcHNwaW4tc2VydmVyL3NyYy9hcHAvYXBpL3dpbnMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHByaXNtYURiIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UtcHJpc21hJztcbmltcG9ydCB7IFJlY29yZFdpblJlcXVlc3QsIEFwaVJlc3BvbnNlLCBXaW4gfSBmcm9tICdAL2xpYi90eXBlcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U8QXBpUmVzcG9uc2U8V2luPj4+IHtcbiAgY29uc29sZS5sb2coJ/CfjrAgU0VSVkVSOiBXaW4gcmVjb3JkaW5nIHJlcXVlc3QgcmVjZWl2ZWQnKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB3aW5EYXRhOiBSZWNvcmRXaW5SZXF1ZXN0ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2coJ/CfjrAgU0VSVkVSOiBXaW4gZGF0YTonLCB7IHVzZXJJZDogd2luRGF0YS51c2VySWQsIHByb2R1Y3ROYW1lOiB3aW5EYXRhLnByb2R1Y3Q/Lm5hbWUsIHN0YWtlOiB3aW5EYXRhLnN0YWtlQW1vdW50IH0pO1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCF3aW5EYXRhLnVzZXJJZCB8fCAhd2luRGF0YS5wcm9kdWN0IHx8ICF3aW5EYXRhLnN0YWtlQW1vdW50IHx8ICF3aW5EYXRhLnByb2JhYmlsaXR5KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogdXNlcklkLCBwcm9kdWN0LCBzdGFrZUFtb3VudCwgYW5kIHByb2JhYmlsaXR5IGFyZSByZXF1aXJlZCdcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHVzZXIgZXhpc3RzXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYURiLmdldFVzZXJCeUlkKHdpbkRhdGEudXNlcklkKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJ1xuICAgICAgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgd2luIHJlY29yZFxuICAgIGNvbnN0IG5ld1dpbiA9IGF3YWl0IHByaXNtYURiLmNyZWF0ZVdpbih7XG4gICAgICB1c2VySWQ6IHdpbkRhdGEudXNlcklkLFxuICAgICAgcHJvZHVjdDogd2luRGF0YS5wcm9kdWN0LFxuICAgICAgc3Rha2VBbW91bnQ6IHdpbkRhdGEuc3Rha2VBbW91bnQsXG4gICAgICBwcm9iYWJpbGl0eTogd2luRGF0YS5wcm9iYWJpbGl0eSxcbiAgICAgIHdpblRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhg8J+OsCBORVcgV0lOIFJFQ09SREVEISBVc2VyOiAke3VzZXIuZW1haWx9LCBQcm9kdWN0OiAke3dpbkRhdGEucHJvZHVjdC5uYW1lfSwgU3Rha2U6ICQke3dpbkRhdGEuc3Rha2VBbW91bnR9YCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IG5ld1dpbixcbiAgICAgIG1lc3NhZ2U6ICdXaW4gcmVjb3JkZWQgc3VjY2Vzc2Z1bGx5J1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVjb3JkaW5nIHdpbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U8QXBpUmVzcG9uc2U8V2luW10+Pj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCB1c2VySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKTtcblxuICAgIGlmICh1c2VySWQpIHtcbiAgICAgIGNvbnN0IHdpbnMgPSBhd2FpdCBwcmlzbWFEYi5nZXRXaW5zQnlVc2VySWQodXNlcklkKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHdpbnNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCBhbGwgd2lucyBmb3IgYWRtaW4gZGFzaGJvYXJkXG4gICAgY29uc3QgYWxsV2lucyA9IGF3YWl0IHByaXNtYURiLmdldEFsbFdpbnMoKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGFsbFdpbnNcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdpbnM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJ1xuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hRGIiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJ3aW5EYXRhIiwianNvbiIsInVzZXJJZCIsInByb2R1Y3ROYW1lIiwicHJvZHVjdCIsIm5hbWUiLCJzdGFrZSIsInN0YWtlQW1vdW50IiwicHJvYmFiaWxpdHkiLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJ1c2VyIiwiZ2V0VXNlckJ5SWQiLCJuZXdXaW4iLCJjcmVhdGVXaW4iLCJ3aW5UaW1lc3RhbXAiLCJEYXRlIiwiZW1haWwiLCJkYXRhIiwibWVzc2FnZSIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImdldCIsIndpbnMiLCJnZXRXaW5zQnlVc2VySWQiLCJhbGxXaW5zIiwiZ2V0QWxsV2lucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/wins/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database-prisma.ts":
/*!************************************!*\
  !*** ./src/lib/database-prisma.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrismaDatabase: () => (/* binding */ PrismaDatabase),\n/* harmony export */   prismaDb: () => (/* binding */ prismaDb)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nclass PrismaDatabase {\n    // User operations\n    async createUser(userData) {\n        const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.create({\n            data: {\n                email: userData.email,\n                name: userData.name,\n                street: userData.address.street,\n                city: userData.address.city,\n                state: userData.address.state,\n                zipCode: userData.address.zipCode,\n                country: userData.address.country,\n                phone: userData.phone\n            }\n        });\n        return this.formatUser(user);\n    }\n    async getUserByEmail(email) {\n        const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        return user ? this.formatUser(user) : null;\n    }\n    async getUserById(id) {\n        const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id\n            }\n        });\n        return user ? this.formatUser(user) : null;\n    }\n    async updateUser(id, updates) {\n        try {\n            const updateData = {};\n            if (updates.email) updateData.email = updates.email;\n            if (updates.name) updateData.name = updates.name;\n            if (updates.phone !== undefined) updateData.phone = updates.phone;\n            if (updates.address) {\n                updateData.street = updates.address.street;\n                updateData.city = updates.address.city;\n                updateData.state = updates.address.state;\n                updateData.zipCode = updates.address.zipCode;\n                updateData.country = updates.address.country;\n            }\n            const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n                where: {\n                    id\n                },\n                data: updateData\n            });\n            return this.formatUser(user);\n        } catch (error) {\n            console.error('Error updating user:', error);\n            return null;\n        }\n    }\n    // Bet operations\n    async createBet(betData) {\n        const bet = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.create({\n            data: {\n                userId: betData.userId,\n                productName: betData.product.name,\n                productPrice: betData.product.price,\n                productCurrency: betData.product.currency,\n                productUrl: betData.product.url,\n                productImage: betData.product.image,\n                stakeAmount: betData.stakeAmount,\n                probability: betData.probability,\n                won: betData.won,\n                betTimestamp: betData.betTimestamp\n            }\n        });\n        return this.formatBet(bet);\n    }\n    async getBetById(id) {\n        const bet = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findUnique({\n            where: {\n                id\n            }\n        });\n        return bet ? this.formatBet(bet) : null;\n    }\n    async getBetsByUserId(userId) {\n        const bets = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findMany({\n            where: {\n                userId\n            },\n            orderBy: {\n                betTimestamp: 'desc'\n            }\n        });\n        return bets.map(this.formatBet);\n    }\n    async getAllBets() {\n        const bets = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findMany({\n            orderBy: {\n                betTimestamp: 'desc'\n            }\n        });\n        return bets.map(this.formatBet);\n    }\n    // Win operations\n    async createWin(winData) {\n        const win = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.create({\n            data: {\n                userId: winData.userId,\n                productName: winData.product.name,\n                productPrice: winData.product.price,\n                productCurrency: winData.product.currency,\n                productUrl: winData.product.url,\n                productImage: winData.product.image,\n                stakeAmount: winData.stakeAmount,\n                probability: winData.probability,\n                status: this.mapStatusToPrisma(winData.status),\n                orderNumber: winData.orderDetails?.orderNumber,\n                trackingNumber: winData.orderDetails?.trackingNumber,\n                estimatedDelivery: winData.orderDetails?.estimatedDelivery,\n                actualDelivery: winData.orderDetails?.actualDelivery,\n                notes: winData.orderDetails?.notes,\n                winTimestamp: winData.winTimestamp\n            }\n        });\n        return this.formatWin(win);\n    }\n    async getWinById(id) {\n        const win = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findUnique({\n            where: {\n                id\n            }\n        });\n        return win ? this.formatWin(win) : null;\n    }\n    async getWinsByUserId(userId) {\n        const wins = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findMany({\n            where: {\n                userId\n            },\n            orderBy: {\n                winTimestamp: 'desc'\n            }\n        });\n        return wins.map(this.formatWin);\n    }\n    async getAllWins() {\n        const wins = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findMany({\n            orderBy: {\n                winTimestamp: 'desc'\n            }\n        });\n        return wins.map(this.formatWin);\n    }\n    async updateWin(id, updates) {\n        try {\n            const updateData = {};\n            if (updates.status) updateData.status = this.mapStatusToPrisma(updates.status);\n            if (updates.orderDetails) {\n                if (updates.orderDetails.orderNumber !== undefined) updateData.orderNumber = updates.orderDetails.orderNumber;\n                if (updates.orderDetails.trackingNumber !== undefined) updateData.trackingNumber = updates.orderDetails.trackingNumber;\n                if (updates.orderDetails.estimatedDelivery !== undefined) updateData.estimatedDelivery = updates.orderDetails.estimatedDelivery;\n                if (updates.orderDetails.actualDelivery !== undefined) updateData.actualDelivery = updates.orderDetails.actualDelivery;\n                if (updates.orderDetails.notes !== undefined) updateData.notes = updates.orderDetails.notes;\n            }\n            const win = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.update({\n                where: {\n                    id\n                },\n                data: updateData\n            });\n            return this.formatWin(win);\n        } catch (error) {\n            console.error('Error updating win:', error);\n            return null;\n        }\n    }\n    // Statistics\n    async getStatistics() {\n        const [users, bets, wins] = await Promise.all([\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.count(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findMany(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findMany()\n        ]);\n        const totalStakesCollected = bets.reduce((sum, bet)=>sum + bet.stakeAmount, 0);\n        const totalValuePaidOut = wins.reduce((sum, win)=>sum + win.productPrice, 0);\n        const profitLoss = totalStakesCollected - totalValuePaidOut;\n        const totalBets = bets.length;\n        const winningBets = bets.filter((b)=>b.won).length;\n        const losingBets = bets.filter((b)=>!b.won).length;\n        const winRate = totalBets > 0 ? winningBets / totalBets * 100 : 0;\n        return {\n            totalUsers: users,\n            totalBets,\n            winningBets,\n            losingBets,\n            winRate: parseFloat(winRate.toFixed(2)),\n            totalWins: wins.length,\n            pendingWins: wins.filter((w)=>w.status === 'PENDING').length,\n            processingWins: wins.filter((w)=>w.status === 'PROCESSING').length,\n            orderedWins: wins.filter((w)=>w.status === 'ORDERED').length,\n            shippedWins: wins.filter((w)=>w.status === 'SHIPPED').length,\n            deliveredWins: wins.filter((w)=>w.status === 'DELIVERED').length,\n            totalStakesCollected,\n            totalValuePaidOut,\n            profitLoss\n        };\n    }\n    // Reset data (for development/testing)\n    async reset() {\n        await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$transaction([\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.deleteMany(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.deleteMany(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.deleteMany()\n        ]);\n    }\n    // Helper methods to format data\n    formatUser(user) {\n        return {\n            id: user.id,\n            email: user.email,\n            name: user.name,\n            address: {\n                street: user.street,\n                city: user.city,\n                state: user.state,\n                zipCode: user.zipCode,\n                country: user.country\n            },\n            phone: user.phone,\n            createdAt: user.createdAt,\n            updatedAt: user.updatedAt\n        };\n    }\n    formatBet(bet) {\n        return {\n            id: bet.id,\n            userId: bet.userId,\n            product: {\n                name: bet.productName,\n                price: bet.productPrice,\n                currency: bet.productCurrency,\n                url: bet.productUrl,\n                image: bet.productImage\n            },\n            stakeAmount: bet.stakeAmount,\n            probability: bet.probability,\n            won: bet.won,\n            betTimestamp: bet.betTimestamp,\n            createdAt: bet.createdAt,\n            updatedAt: bet.updatedAt\n        };\n    }\n    formatWin(win) {\n        try {\n            return {\n                id: win.id,\n                userId: win.userId,\n                product: {\n                    name: win.productName,\n                    price: win.productPrice,\n                    currency: win.productCurrency,\n                    url: win.productUrl,\n                    image: win.productImage\n                },\n                stakeAmount: win.stakeAmount,\n                probability: win.probability,\n                status: win.status ? win.status.toLowerCase() : 'pending',\n                orderDetails: {\n                    orderNumber: win.orderNumber || null,\n                    trackingNumber: win.trackingNumber || null,\n                    estimatedDelivery: win.estimatedDelivery || null,\n                    actualDelivery: win.actualDelivery || null,\n                    notes: win.notes || null\n                },\n                winTimestamp: win.winTimestamp,\n                createdAt: win.createdAt,\n                updatedAt: win.updatedAt\n            };\n        } catch (error) {\n            console.error('Error formatting win:', error, 'Win data:', win);\n            throw error;\n        }\n    }\n    mapStatusToPrisma(status) {\n        return status.toUpperCase().replace(/-/g, '_');\n    }\n    mapStatusFromPrisma(status) {\n        // Convert Prisma enum values to lowercase\n        const mapped = status.toLowerCase();\n        console.log('Mapping status from Prisma:', status, 'to:', mapped);\n        return mapped;\n    }\n}\n// Export singleton instance\nconst prismaDb = new PrismaDatabase();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YyxJQUFJO29CQUN0Q0MsT0FBT1IsSUFBSVEsS0FBSyxJQUFJO2dCQUN0QjtnQkFDQUMsY0FBY1QsSUFBSVMsWUFBWTtnQkFDOUJxQyxXQUFXOUMsSUFBSThDLFNBQVM7Z0JBQ3hCQyxXQUFXL0MsSUFBSStDLFNBQVM7WUFDMUI7UUFDRixFQUFFLE9BQU83RSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBLE9BQU8sYUFBYThCO1lBQzNELE1BQU05QjtRQUNSO0lBQ0Y7SUFFUWdDLGtCQUFrQkQsTUFBYyxFQUFPO1FBQzdDLE9BQU9BLE9BQU9nRCxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxNQUFNO0lBQzVDO0lBRVFDLG9CQUFvQmxELE1BQWMsRUFBaUI7UUFDekQsMENBQTBDO1FBQzFDLE1BQU1tRCxTQUFTbkQsT0FBTytDLFdBQVc7UUFDakM3RSxRQUFRa0YsR0FBRyxDQUFDLCtCQUErQnBELFFBQVEsT0FBT21EO1FBQzFELE9BQU9BO0lBQ1Q7QUFDRjtBQUVBLDRCQUE0QjtBQUNyQixNQUFNRSxXQUFXLElBQUk5RyxpQkFBaUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYW1jaG91L1N3ZWVwc3Rha2VzIEdvb2dsZSBFeHRlbnNpb24vc2hvcHNwaW4tc2VydmVyL3NyYy9saWIvZGF0YWJhc2UtcHJpc21hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4vcHJpc21hJztcbmltcG9ydCB7IFVzZXIsIFdpbiwgQmV0IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBQcmlzbWFEYXRhYmFzZSB7XG4gIC8vIFVzZXIgb3BlcmF0aW9uc1xuICBhc3luYyBjcmVhdGVVc2VyKHVzZXJEYXRhOiBPbWl0PFVzZXIsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8VXNlcj4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBlbWFpbDogdXNlckRhdGEuZW1haWwsXG4gICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgIHN0cmVldDogdXNlckRhdGEuYWRkcmVzcy5zdHJlZXQsXG4gICAgICAgIGNpdHk6IHVzZXJEYXRhLmFkZHJlc3MuY2l0eSxcbiAgICAgICAgc3RhdGU6IHVzZXJEYXRhLmFkZHJlc3Muc3RhdGUsXG4gICAgICAgIHppcENvZGU6IHVzZXJEYXRhLmFkZHJlc3MuemlwQ29kZSxcbiAgICAgICAgY291bnRyeTogdXNlckRhdGEuYWRkcmVzcy5jb3VudHJ5LFxuICAgICAgICBwaG9uZTogdXNlckRhdGEucGhvbmUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0VXNlcih1c2VyKTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgZW1haWwgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB1c2VyID8gdGhpcy5mb3JtYXRVc2VyKHVzZXIpIDogbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB1c2VyID8gdGhpcy5mb3JtYXRVc2VyKHVzZXIpIDogbnVsbDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PFVzZXIsICdpZCcgfCAnY3JlYXRlZEF0Jz4+KTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKHVwZGF0ZXMuZW1haWwpIHVwZGF0ZURhdGEuZW1haWwgPSB1cGRhdGVzLmVtYWlsO1xuICAgICAgaWYgKHVwZGF0ZXMubmFtZSkgdXBkYXRlRGF0YS5uYW1lID0gdXBkYXRlcy5uYW1lO1xuICAgICAgaWYgKHVwZGF0ZXMucGhvbmUgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5waG9uZSA9IHVwZGF0ZXMucGhvbmU7XG4gICAgICBcbiAgICAgIGlmICh1cGRhdGVzLmFkZHJlc3MpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5zdHJlZXQgPSB1cGRhdGVzLmFkZHJlc3Muc3RyZWV0O1xuICAgICAgICB1cGRhdGVEYXRhLmNpdHkgPSB1cGRhdGVzLmFkZHJlc3MuY2l0eTtcbiAgICAgICAgdXBkYXRlRGF0YS5zdGF0ZSA9IHVwZGF0ZXMuYWRkcmVzcy5zdGF0ZTtcbiAgICAgICAgdXBkYXRlRGF0YS56aXBDb2RlID0gdXBkYXRlcy5hZGRyZXNzLnppcENvZGU7XG4gICAgICAgIHVwZGF0ZURhdGEuY291bnRyeSA9IHVwZGF0ZXMuYWRkcmVzcy5jb3VudHJ5O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRVc2VyKHVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIEJldCBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZUJldChiZXREYXRhOiBPbWl0PEJldCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxCZXQ+IHtcbiAgICBjb25zdCBiZXQgPSBhd2FpdCBwcmlzbWEuYmV0LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZDogYmV0RGF0YS51c2VySWQsXG4gICAgICAgIHByb2R1Y3ROYW1lOiBiZXREYXRhLnByb2R1Y3QubmFtZSxcbiAgICAgICAgcHJvZHVjdFByaWNlOiBiZXREYXRhLnByb2R1Y3QucHJpY2UsXG4gICAgICAgIHByb2R1Y3RDdXJyZW5jeTogYmV0RGF0YS5wcm9kdWN0LmN1cnJlbmN5LFxuICAgICAgICBwcm9kdWN0VXJsOiBiZXREYXRhLnByb2R1Y3QudXJsLFxuICAgICAgICBwcm9kdWN0SW1hZ2U6IGJldERhdGEucHJvZHVjdC5pbWFnZSxcbiAgICAgICAgc3Rha2VBbW91bnQ6IGJldERhdGEuc3Rha2VBbW91bnQsXG4gICAgICAgIHByb2JhYmlsaXR5OiBiZXREYXRhLnByb2JhYmlsaXR5LFxuICAgICAgICB3b246IGJldERhdGEud29uLFxuICAgICAgICBiZXRUaW1lc3RhbXA6IGJldERhdGEuYmV0VGltZXN0YW1wLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmZvcm1hdEJldChiZXQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0QmV0QnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxCZXQgfCBudWxsPiB7XG4gICAgY29uc3QgYmV0ID0gYXdhaXQgcHJpc21hLmJldC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gYmV0ID8gdGhpcy5mb3JtYXRCZXQoYmV0KSA6IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRCZXRzQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEJldFtdPiB7XG4gICAgY29uc3QgYmV0cyA9IGF3YWl0IHByaXNtYS5iZXQuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBvcmRlckJ5OiB7IGJldFRpbWVzdGFtcDogJ2Rlc2MnIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gYmV0cy5tYXAodGhpcy5mb3JtYXRCZXQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsQmV0cygpOiBQcm9taXNlPEJldFtdPiB7XG4gICAgY29uc3QgYmV0cyA9IGF3YWl0IHByaXNtYS5iZXQuZmluZE1hbnkoe1xuICAgICAgb3JkZXJCeTogeyBiZXRUaW1lc3RhbXA6ICdkZXNjJyB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJldHMubWFwKHRoaXMuZm9ybWF0QmV0KTtcbiAgfVxuXG4gIC8vIFdpbiBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZVdpbih3aW5EYXRhOiBPbWl0PFdpbiwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxXaW4+IHtcbiAgICBjb25zdCB3aW4gPSBhd2FpdCBwcmlzbWEud2luLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZDogd2luRGF0YS51c2VySWQsXG4gICAgICAgIHByb2R1Y3ROYW1lOiB3aW5EYXRhLnByb2R1Y3QubmFtZSxcbiAgICAgICAgcHJvZHVjdFByaWNlOiB3aW5EYXRhLnByb2R1Y3QucHJpY2UsXG4gICAgICAgIHByb2R1Y3RDdXJyZW5jeTogd2luRGF0YS5wcm9kdWN0LmN1cnJlbmN5LFxuICAgICAgICBwcm9kdWN0VXJsOiB3aW5EYXRhLnByb2R1Y3QudXJsLFxuICAgICAgICBwcm9kdWN0SW1hZ2U6IHdpbkRhdGEucHJvZHVjdC5pbWFnZSxcbiAgICAgICAgc3Rha2VBbW91bnQ6IHdpbkRhdGEuc3Rha2VBbW91bnQsXG4gICAgICAgIHByb2JhYmlsaXR5OiB3aW5EYXRhLnByb2JhYmlsaXR5LFxuICAgICAgICBzdGF0dXM6IHRoaXMubWFwU3RhdHVzVG9QcmlzbWEod2luRGF0YS5zdGF0dXMpLFxuICAgICAgICBvcmRlck51bWJlcjogd2luRGF0YS5vcmRlckRldGFpbHM/Lm9yZGVyTnVtYmVyLFxuICAgICAgICB0cmFja2luZ051bWJlcjogd2luRGF0YS5vcmRlckRldGFpbHM/LnRyYWNraW5nTnVtYmVyLFxuICAgICAgICBlc3RpbWF0ZWREZWxpdmVyeTogd2luRGF0YS5vcmRlckRldGFpbHM/LmVzdGltYXRlZERlbGl2ZXJ5LFxuICAgICAgICBhY3R1YWxEZWxpdmVyeTogd2luRGF0YS5vcmRlckRldGFpbHM/LmFjdHVhbERlbGl2ZXJ5LFxuICAgICAgICBub3Rlczogd2luRGF0YS5vcmRlckRldGFpbHM/Lm5vdGVzLFxuICAgICAgICB3aW5UaW1lc3RhbXA6IHdpbkRhdGEud2luVGltZXN0YW1wLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmZvcm1hdFdpbih3aW4pO1xuICB9XG5cbiAgYXN5bmMgZ2V0V2luQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxXaW4gfCBudWxsPiB7XG4gICAgY29uc3Qgd2luID0gYXdhaXQgcHJpc21hLndpbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gd2luID8gdGhpcy5mb3JtYXRXaW4od2luKSA6IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRXaW5zQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFdpbltdPiB7XG4gICAgY29uc3Qgd2lucyA9IGF3YWl0IHByaXNtYS53aW4uZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBvcmRlckJ5OiB7IHdpblRpbWVzdGFtcDogJ2Rlc2MnIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gd2lucy5tYXAodGhpcy5mb3JtYXRXaW4pO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsV2lucygpOiBQcm9taXNlPFdpbltdPiB7XG4gICAgY29uc3Qgd2lucyA9IGF3YWl0IHByaXNtYS53aW4uZmluZE1hbnkoe1xuICAgICAgb3JkZXJCeTogeyB3aW5UaW1lc3RhbXA6ICdkZXNjJyB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHdpbnMubWFwKHRoaXMuZm9ybWF0V2luKTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVdpbihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPE9taXQ8V2luLCAnaWQnIHwgJ2NyZWF0ZWRBdCc+Pik6IFByb21pc2U8V2luIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKHVwZGF0ZXMuc3RhdHVzKSB1cGRhdGVEYXRhLnN0YXR1cyA9IHRoaXMubWFwU3RhdHVzVG9QcmlzbWEodXBkYXRlcy5zdGF0dXMpO1xuICAgICAgXG4gICAgICBpZiAodXBkYXRlcy5vcmRlckRldGFpbHMpIHtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLm9yZGVyTnVtYmVyICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEub3JkZXJOdW1iZXIgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5vcmRlck51bWJlcjtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLnRyYWNraW5nTnVtYmVyICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEudHJhY2tpbmdOdW1iZXIgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy50cmFja2luZ051bWJlcjtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLmVzdGltYXRlZERlbGl2ZXJ5ICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEuZXN0aW1hdGVkRGVsaXZlcnkgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5lc3RpbWF0ZWREZWxpdmVyeTtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLmFjdHVhbERlbGl2ZXJ5ICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEuYWN0dWFsRGVsaXZlcnkgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5hY3R1YWxEZWxpdmVyeTtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLm5vdGVzICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEubm90ZXMgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5ub3RlcztcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2luID0gYXdhaXQgcHJpc21hLndpbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhOiB1cGRhdGVEYXRhLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFdpbih3aW4pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3aW46JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gU3RhdGlzdGljc1xuICBhc3luYyBnZXRTdGF0aXN0aWNzKCkge1xuICAgIGNvbnN0IFt1c2VycywgYmV0cywgd2luc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBwcmlzbWEudXNlci5jb3VudCgpLFxuICAgICAgcHJpc21hLmJldC5maW5kTWFueSgpLFxuICAgICAgcHJpc21hLndpbi5maW5kTWFueSgpLFxuICAgIF0pO1xuXG4gICAgY29uc3QgdG90YWxTdGFrZXNDb2xsZWN0ZWQgPSBiZXRzLnJlZHVjZSgoc3VtLCBiZXQpID0+IHN1bSArIGJldC5zdGFrZUFtb3VudCwgMCk7XG4gICAgY29uc3QgdG90YWxWYWx1ZVBhaWRPdXQgPSB3aW5zLnJlZHVjZSgoc3VtLCB3aW4pID0+IHN1bSArIHdpbi5wcm9kdWN0UHJpY2UsIDApO1xuICAgIGNvbnN0IHByb2ZpdExvc3MgPSB0b3RhbFN0YWtlc0NvbGxlY3RlZCAtIHRvdGFsVmFsdWVQYWlkT3V0O1xuICAgIFxuICAgIGNvbnN0IHRvdGFsQmV0cyA9IGJldHMubGVuZ3RoO1xuICAgIGNvbnN0IHdpbm5pbmdCZXRzID0gYmV0cy5maWx0ZXIoYiA9PiBiLndvbikubGVuZ3RoO1xuICAgIGNvbnN0IGxvc2luZ0JldHMgPSBiZXRzLmZpbHRlcihiID0+ICFiLndvbikubGVuZ3RoO1xuICAgIGNvbnN0IHdpblJhdGUgPSB0b3RhbEJldHMgPiAwID8gKHdpbm5pbmdCZXRzIC8gdG90YWxCZXRzKSAqIDEwMCA6IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxVc2VyczogdXNlcnMsXG4gICAgICB0b3RhbEJldHMsXG4gICAgICB3aW5uaW5nQmV0cyxcbiAgICAgIGxvc2luZ0JldHMsXG4gICAgICB3aW5SYXRlOiBwYXJzZUZsb2F0KHdpblJhdGUudG9GaXhlZCgyKSksXG4gICAgICB0b3RhbFdpbnM6IHdpbnMubGVuZ3RoLFxuICAgICAgcGVuZGluZ1dpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdQRU5ESU5HJykubGVuZ3RoLFxuICAgICAgcHJvY2Vzc2luZ1dpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdQUk9DRVNTSU5HJykubGVuZ3RoLFxuICAgICAgb3JkZXJlZFdpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdPUkRFUkVEJykubGVuZ3RoLFxuICAgICAgc2hpcHBlZFdpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdTSElQUEVEJykubGVuZ3RoLFxuICAgICAgZGVsaXZlcmVkV2luczogd2lucy5maWx0ZXIodyA9PiB3LnN0YXR1cyA9PT0gJ0RFTElWRVJFRCcpLmxlbmd0aCxcbiAgICAgIHRvdGFsU3Rha2VzQ29sbGVjdGVkLFxuICAgICAgdG90YWxWYWx1ZVBhaWRPdXQsXG4gICAgICBwcm9maXRMb3NzLFxuICAgIH07XG4gIH1cblxuICAvLyBSZXNldCBkYXRhIChmb3IgZGV2ZWxvcG1lbnQvdGVzdGluZylcbiAgYXN5bmMgcmVzZXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihbXG4gICAgICBwcmlzbWEuYmV0LmRlbGV0ZU1hbnkoKSxcbiAgICAgIHByaXNtYS53aW4uZGVsZXRlTWFueSgpLFxuICAgICAgcHJpc21hLnVzZXIuZGVsZXRlTWFueSgpLFxuICAgIF0pO1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZHMgdG8gZm9ybWF0IGRhdGFcbiAgcHJpdmF0ZSBmb3JtYXRVc2VyKHVzZXI6IGFueSk6IFVzZXIge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdXNlci5pZCxcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgYWRkcmVzczoge1xuICAgICAgICBzdHJlZXQ6IHVzZXIuc3RyZWV0LFxuICAgICAgICBjaXR5OiB1c2VyLmNpdHksXG4gICAgICAgIHN0YXRlOiB1c2VyLnN0YXRlLFxuICAgICAgICB6aXBDb2RlOiB1c2VyLnppcENvZGUsXG4gICAgICAgIGNvdW50cnk6IHVzZXIuY291bnRyeSxcbiAgICAgIH0sXG4gICAgICBwaG9uZTogdXNlci5waG9uZSxcbiAgICAgIGNyZWF0ZWRBdDogdXNlci5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IHVzZXIudXBkYXRlZEF0LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEJldChiZXQ6IGFueSk6IEJldCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBiZXQuaWQsXG4gICAgICB1c2VySWQ6IGJldC51c2VySWQsXG4gICAgICBwcm9kdWN0OiB7XG4gICAgICAgIG5hbWU6IGJldC5wcm9kdWN0TmFtZSxcbiAgICAgICAgcHJpY2U6IGJldC5wcm9kdWN0UHJpY2UsXG4gICAgICAgIGN1cnJlbmN5OiBiZXQucHJvZHVjdEN1cnJlbmN5LFxuICAgICAgICB1cmw6IGJldC5wcm9kdWN0VXJsLFxuICAgICAgICBpbWFnZTogYmV0LnByb2R1Y3RJbWFnZSxcbiAgICAgIH0sXG4gICAgICBzdGFrZUFtb3VudDogYmV0LnN0YWtlQW1vdW50LFxuICAgICAgcHJvYmFiaWxpdHk6IGJldC5wcm9iYWJpbGl0eSxcbiAgICAgIHdvbjogYmV0LndvbixcbiAgICAgIGJldFRpbWVzdGFtcDogYmV0LmJldFRpbWVzdGFtcCxcbiAgICAgIGNyZWF0ZWRBdDogYmV0LmNyZWF0ZWRBdCxcbiAgICAgIHVwZGF0ZWRBdDogYmV0LnVwZGF0ZWRBdCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRXaW4od2luOiBhbnkpOiBXaW4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogd2luLmlkLFxuICAgICAgICB1c2VySWQ6IHdpbi51c2VySWQsXG4gICAgICAgIHByb2R1Y3Q6IHtcbiAgICAgICAgICBuYW1lOiB3aW4ucHJvZHVjdE5hbWUsXG4gICAgICAgICAgcHJpY2U6IHdpbi5wcm9kdWN0UHJpY2UsXG4gICAgICAgICAgY3VycmVuY3k6IHdpbi5wcm9kdWN0Q3VycmVuY3ksXG4gICAgICAgICAgdXJsOiB3aW4ucHJvZHVjdFVybCxcbiAgICAgICAgICBpbWFnZTogd2luLnByb2R1Y3RJbWFnZSxcbiAgICAgICAgfSxcbiAgICAgICAgc3Rha2VBbW91bnQ6IHdpbi5zdGFrZUFtb3VudCxcbiAgICAgICAgcHJvYmFiaWxpdHk6IHdpbi5wcm9iYWJpbGl0eSxcbiAgICAgICAgc3RhdHVzOiB3aW4uc3RhdHVzID8gd2luLnN0YXR1cy50b0xvd2VyQ2FzZSgpIDogJ3BlbmRpbmcnLFxuICAgICAgICBvcmRlckRldGFpbHM6IHtcbiAgICAgICAgICBvcmRlck51bWJlcjogd2luLm9yZGVyTnVtYmVyIHx8IG51bGwsXG4gICAgICAgICAgdHJhY2tpbmdOdW1iZXI6IHdpbi50cmFja2luZ051bWJlciB8fCBudWxsLFxuICAgICAgICAgIGVzdGltYXRlZERlbGl2ZXJ5OiB3aW4uZXN0aW1hdGVkRGVsaXZlcnkgfHwgbnVsbCxcbiAgICAgICAgICBhY3R1YWxEZWxpdmVyeTogd2luLmFjdHVhbERlbGl2ZXJ5IHx8IG51bGwsXG4gICAgICAgICAgbm90ZXM6IHdpbi5ub3RlcyB8fCBudWxsLFxuICAgICAgICB9LFxuICAgICAgICB3aW5UaW1lc3RhbXA6IHdpbi53aW5UaW1lc3RhbXAsXG4gICAgICAgIGNyZWF0ZWRBdDogd2luLmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiB3aW4udXBkYXRlZEF0LFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZm9ybWF0dGluZyB3aW46JywgZXJyb3IsICdXaW4gZGF0YTonLCB3aW4pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtYXBTdGF0dXNUb1ByaXNtYShzdGF0dXM6IHN0cmluZyk6IGFueSB7XG4gICAgcmV0dXJuIHN0YXR1cy50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoLy0vZywgJ18nKTtcbiAgfVxuXG4gIHByaXZhdGUgbWFwU3RhdHVzRnJvbVByaXNtYShzdGF0dXM6IHN0cmluZyk6IFdpblsnc3RhdHVzJ10ge1xuICAgIC8vIENvbnZlcnQgUHJpc21hIGVudW0gdmFsdWVzIHRvIGxvd2VyY2FzZVxuICAgIGNvbnN0IG1hcHBlZCA9IHN0YXR1cy50b0xvd2VyQ2FzZSgpIGFzIFdpblsnc3RhdHVzJ107XG4gICAgY29uc29sZS5sb2coJ01hcHBpbmcgc3RhdHVzIGZyb20gUHJpc21hOicsIHN0YXR1cywgJ3RvOicsIG1hcHBlZCk7XG4gICAgcmV0dXJuIG1hcHBlZDtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcHJpc21hRGIgPSBuZXcgUHJpc21hRGF0YWJhc2UoKTsiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hRGF0YWJhc2UiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJ1c2VyIiwiY3JlYXRlIiwiZGF0YSIsImVtYWlsIiwibmFtZSIsInN0cmVldCIsImFkZHJlc3MiLCJjaXR5Iiwic3RhdGUiLCJ6aXBDb2RlIiwiY291bnRyeSIsInBob25lIiwiZm9ybWF0VXNlciIsImdldFVzZXJCeUVtYWlsIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZ2V0VXNlckJ5SWQiLCJpZCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwidXBkYXRlRGF0YSIsInVuZGVmaW5lZCIsInVwZGF0ZSIsImVycm9yIiwiY29uc29sZSIsImNyZWF0ZUJldCIsImJldERhdGEiLCJiZXQiLCJ1c2VySWQiLCJwcm9kdWN0TmFtZSIsInByb2R1Y3QiLCJwcm9kdWN0UHJpY2UiLCJwcmljZSIsInByb2R1Y3RDdXJyZW5jeSIsImN1cnJlbmN5IiwicHJvZHVjdFVybCIsInVybCIsInByb2R1Y3RJbWFnZSIsImltYWdlIiwic3Rha2VBbW91bnQiLCJwcm9iYWJpbGl0eSIsIndvbiIsImJldFRpbWVzdGFtcCIsImZvcm1hdEJldCIsImdldEJldEJ5SWQiLCJnZXRCZXRzQnlVc2VySWQiLCJiZXRzIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwibWFwIiwiZ2V0QWxsQmV0cyIsImNyZWF0ZVdpbiIsIndpbkRhdGEiLCJ3aW4iLCJzdGF0dXMiLCJtYXBTdGF0dXNUb1ByaXNtYSIsIm9yZGVyTnVtYmVyIiwib3JkZXJEZXRhaWxzIiwidHJhY2tpbmdOdW1iZXIiLCJlc3RpbWF0ZWREZWxpdmVyeSIsImFjdHVhbERlbGl2ZXJ5Iiwibm90ZXMiLCJ3aW5UaW1lc3RhbXAiLCJmb3JtYXRXaW4iLCJnZXRXaW5CeUlkIiwiZ2V0V2luc0J5VXNlcklkIiwid2lucyIsImdldEFsbFdpbnMiLCJ1cGRhdGVXaW4iLCJnZXRTdGF0aXN0aWNzIiwidXNlcnMiLCJQcm9taXNlIiwiYWxsIiwiY291bnQiLCJ0b3RhbFN0YWtlc0NvbGxlY3RlZCIsInJlZHVjZSIsInN1bSIsInRvdGFsVmFsdWVQYWlkT3V0IiwicHJvZml0TG9zcyIsInRvdGFsQmV0cyIsImxlbmd0aCIsIndpbm5pbmdCZXRzIiwiZmlsdGVyIiwiYiIsImxvc2luZ0JldHMiLCJ3aW5SYXRlIiwidG90YWxVc2VycyIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwidG90YWxXaW5zIiwicGVuZGluZ1dpbnMiLCJ3IiwicHJvY2Vzc2luZ1dpbnMiLCJvcmRlcmVkV2lucyIsInNoaXBwZWRXaW5zIiwiZGVsaXZlcmVkV2lucyIsInJlc2V0IiwiJHRyYW5zYWN0aW9uIiwiZGVsZXRlTWFueSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJyZXBsYWNlIiwibWFwU3RhdHVzRnJvbVByaXNtYSIsIm1hcHBlZCIsImxvZyIsInByaXNtYURiIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database-prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        'query'\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBSztRQUFDO0tBQVE7QUFDaEIsR0FBRTtBQUVKLElBQUlDLElBQXFDLEVBQUVKLGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsiL1VzZXJzL3NhbWNob3UvU3dlZXBzdGFrZXMgR29vZ2xlIEV4dGVuc2lvbi9zaG9wc3Bpbi1zZXJ2ZXIvc3JjL2xpYi9wcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/XG4gIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzogWydxdWVyeSddLFxuICB9KVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwins%2Froute&page=%2Fapi%2Fwins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwins%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();