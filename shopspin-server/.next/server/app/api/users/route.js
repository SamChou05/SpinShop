/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/users/route";
exports.ids = ["app/api/users/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_samchou_Sweepstakes_Google_Extension_shopspin_server_src_app_api_users_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/users/route.ts */ \"(rsc)/./src/app/api/users/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/users/route\",\n        pathname: \"/api/users\",\n        filename: \"route\",\n        bundlePath: \"app/api/users/route\"\n    },\n    resolvedPagePath: \"/Users/samchou/Sweepstakes Google Extension/shopspin-server/src/app/api/users/route.ts\",\n    nextConfigOutput,\n    userland: _Users_samchou_Sweepstakes_Google_Extension_shopspin_server_src_app_api_users_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VycyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdXNlcnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ1c2VycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNhbWNob3UlMkZTd2VlcHN0YWtlcyUyMEdvb2dsZSUyMEV4dGVuc2lvbiUyRnNob3BzcGluLXNlcnZlciUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzYW1jaG91JTJGU3dlZXBzdGFrZXMlMjBHb29nbGUlMjBFeHRlbnNpb24lMkZzaG9wc3Bpbi1zZXJ2ZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3NDO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2FtY2hvdS9Td2VlcHN0YWtlcyBHb29nbGUgRXh0ZW5zaW9uL3Nob3BzcGluLXNlcnZlci9zcmMvYXBwL2FwaS91c2Vycy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXNlcnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91c2Vyc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXNlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2FtY2hvdS9Td2VlcHN0YWtlcyBHb29nbGUgRXh0ZW5zaW9uL3Nob3BzcGluLXNlcnZlci9zcmMvYXBwL2FwaS91c2Vycy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/users/route.ts":
/*!************************************!*\
  !*** ./src/app/api/users/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database-prisma */ \"(rsc)/./src/lib/database-prisma.ts\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/validation */ \"(rsc)/./src/lib/validation.ts\");\n/* harmony import */ var _lib_rateLimit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/rateLimit */ \"(rsc)/./src/lib/rateLimit.ts\");\n\n\n\n\nasync function POST(request) {\n    console.log('ðŸŽ° SERVER: User creation request received');\n    try {\n        // Rate limiting check\n        const clientIP = (0,_lib_rateLimit__WEBPACK_IMPORTED_MODULE_3__.getClientIP)(request);\n        if (_lib_rateLimit__WEBPACK_IMPORTED_MODULE_3__.userCreationRateLimiter.isRateLimited(clientIP)) {\n            const resetTime = _lib_rateLimit__WEBPACK_IMPORTED_MODULE_3__.userCreationRateLimiter.getResetTime(clientIP);\n            const remaining = Math.ceil((resetTime - Date.now()) / 1000 / 60); // minutes\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Rate limit exceeded. Too many registration attempts. Try again in ${remaining} minutes.`\n            }, {\n                status: 429\n            });\n        }\n        const userData = await request.json();\n        console.log('ðŸŽ° SERVER: User data:', {\n            email: userData.email,\n            name: userData.name\n        });\n        // Validate all input fields\n        try {\n            (0,_lib_validation__WEBPACK_IMPORTED_MODULE_2__.validateEmail)(userData.email);\n            (0,_lib_validation__WEBPACK_IMPORTED_MODULE_2__.validateName)(userData.name);\n            (0,_lib_validation__WEBPACK_IMPORTED_MODULE_2__.validateAddress)(userData.address);\n            (0,_lib_validation__WEBPACK_IMPORTED_MODULE_2__.validatePhone)(userData.phone);\n        } catch (error) {\n            if (error instanceof _lib_validation__WEBPACK_IMPORTED_MODULE_2__.ValidationError) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: error.message\n                }, {\n                    status: 400\n                });\n            }\n            throw error;\n        }\n        // Check if user already exists\n        const existingUser = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.getUserByEmail(userData.email);\n        if (existingUser) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: existingUser,\n                message: 'User already exists'\n            });\n        }\n        // Create new user\n        const newUser = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.createUser(userData);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: newUser,\n            message: 'User created successfully'\n        });\n    } catch (error) {\n        console.error('Error creating user:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const email = searchParams.get('email');\n        const id = searchParams.get('id');\n        if (email) {\n            const user = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.getUserByEmail(email);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: user\n            });\n        }\n        if (id) {\n            const user = await _lib_database_prisma__WEBPACK_IMPORTED_MODULE_1__.prismaDb.getUserById(id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: user\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Either email or id parameter is required'\n        }, {\n            status: 400\n        });\n    } catch (error) {\n        console.error('Error fetching user:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RXLE1BQU1TO1lBQ1I7UUFDRjtRQUVBLE9BQU8zQyxxREFBWUEsQ0FBQ3NCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUQyxPQUFPO1FBQ1QsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFFbkIsRUFBRSxPQUFPRCxPQUFPO1FBQ2RiLFFBQVFhLEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE9BQU94QixxREFBWUEsQ0FBQ3NCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUQyxPQUFPO1FBQ1QsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3NhbWNob3UvU3dlZXBzdGFrZXMgR29vZ2xlIEV4dGVuc2lvbi9zaG9wc3Bpbi1zZXJ2ZXIvc3JjL2FwcC9hcGkvdXNlcnMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHByaXNtYURiIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UtcHJpc21hJztcbmltcG9ydCB7IENyZWF0ZVVzZXJSZXF1ZXN0LCBBcGlSZXNwb25zZSwgVXNlciB9IGZyb20gJ0AvbGliL3R5cGVzJztcbmltcG9ydCB7IHZhbGlkYXRlRW1haWwsIHZhbGlkYXRlTmFtZSwgdmFsaWRhdGVBZGRyZXNzLCB2YWxpZGF0ZVBob25lLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICdAL2xpYi92YWxpZGF0aW9uJztcbmltcG9ydCB7IHVzZXJDcmVhdGlvblJhdGVMaW1pdGVyLCBnZXRDbGllbnRJUCB9IGZyb20gJ0AvbGliL3JhdGVMaW1pdCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U8QXBpUmVzcG9uc2U8VXNlcj4+PiB7XG4gIGNvbnNvbGUubG9nKCfwn46wIFNFUlZFUjogVXNlciBjcmVhdGlvbiByZXF1ZXN0IHJlY2VpdmVkJyk7XG4gIHRyeSB7XG4gICAgLy8gUmF0ZSBsaW1pdGluZyBjaGVja1xuICAgIGNvbnN0IGNsaWVudElQID0gZ2V0Q2xpZW50SVAocmVxdWVzdCk7XG4gICAgaWYgKHVzZXJDcmVhdGlvblJhdGVMaW1pdGVyLmlzUmF0ZUxpbWl0ZWQoY2xpZW50SVApKSB7XG4gICAgICBjb25zdCByZXNldFRpbWUgPSB1c2VyQ3JlYXRpb25SYXRlTGltaXRlci5nZXRSZXNldFRpbWUoY2xpZW50SVApO1xuICAgICAgY29uc3QgcmVtYWluaW5nID0gTWF0aC5jZWlsKChyZXNldFRpbWUgLSBEYXRlLm5vdygpKSAvIDEwMDAgLyA2MCk7IC8vIG1pbnV0ZXNcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgUmF0ZSBsaW1pdCBleGNlZWRlZC4gVG9vIG1hbnkgcmVnaXN0cmF0aW9uIGF0dGVtcHRzLiBUcnkgYWdhaW4gaW4gJHtyZW1haW5pbmd9IG1pbnV0ZXMuYFxuICAgICAgfSwgeyBzdGF0dXM6IDQyOSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyRGF0YTogQ3JlYXRlVXNlclJlcXVlc3QgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zb2xlLmxvZygn8J+OsCBTRVJWRVI6IFVzZXIgZGF0YTonLCB7IGVtYWlsOiB1c2VyRGF0YS5lbWFpbCwgbmFtZTogdXNlckRhdGEubmFtZSB9KTtcblxuICAgIC8vIFZhbGlkYXRlIGFsbCBpbnB1dCBmaWVsZHNcbiAgICB0cnkge1xuICAgICAgdmFsaWRhdGVFbWFpbCh1c2VyRGF0YS5lbWFpbCk7XG4gICAgICB2YWxpZGF0ZU5hbWUodXNlckRhdGEubmFtZSk7XG4gICAgICB2YWxpZGF0ZUFkZHJlc3ModXNlckRhdGEuYWRkcmVzcyk7XG4gICAgICB2YWxpZGF0ZVBob25lKHVzZXJEYXRhLnBob25lKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWFEYi5nZXRVc2VyQnlFbWFpbCh1c2VyRGF0YS5lbWFpbCk7XG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogZXhpc3RpbmdVc2VyLFxuICAgICAgICBtZXNzYWdlOiAnVXNlciBhbHJlYWR5IGV4aXN0cydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgdXNlclxuICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBwcmlzbWFEYi5jcmVhdGVVc2VyKHVzZXJEYXRhKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogbmV3VXNlcixcbiAgICAgIG1lc3NhZ2U6ICdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U8QXBpUmVzcG9uc2U8VXNlciB8IG51bGw+Pj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBlbWFpbCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2VtYWlsJyk7XG4gICAgY29uc3QgaWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xuXG4gICAgaWYgKGVtYWlsKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hRGIuZ2V0VXNlckJ5RW1haWwoZW1haWwpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdXNlclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hRGIuZ2V0VXNlckJ5SWQoaWQpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdXNlclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdFaXRoZXIgZW1haWwgb3IgaWQgcGFyYW1ldGVyIGlzIHJlcXVpcmVkJ1xuICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcidcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYURiIiwidmFsaWRhdGVFbWFpbCIsInZhbGlkYXRlTmFtZSIsInZhbGlkYXRlQWRkcmVzcyIsInZhbGlkYXRlUGhvbmUiLCJWYWxpZGF0aW9uRXJyb3IiLCJ1c2VyQ3JlYXRpb25SYXRlTGltaXRlciIsImdldENsaWVudElQIiwiUE9TVCIsInJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwiY2xpZW50SVAiLCJpc1JhdGVMaW1pdGVkIiwicmVzZXRUaW1lIiwiZ2V0UmVzZXRUaW1lIiwicmVtYWluaW5nIiwiTWF0aCIsImNlaWwiLCJEYXRlIiwibm93IiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsInVzZXJEYXRhIiwiZW1haWwiLCJuYW1lIiwiYWRkcmVzcyIsInBob25lIiwibWVzc2FnZSIsImV4aXN0aW5nVXNlciIsImdldFVzZXJCeUVtYWlsIiwiZGF0YSIsIm5ld1VzZXIiLCJjcmVhdGVVc2VyIiwiR0VUIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwiaWQiLCJ1c2VyIiwiZ2V0VXNlckJ5SWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/users/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database-prisma.ts":
/*!************************************!*\
  !*** ./src/lib/database-prisma.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrismaDatabase: () => (/* binding */ PrismaDatabase),\n/* harmony export */   prismaDb: () => (/* binding */ prismaDb)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nclass PrismaDatabase {\n    // User operations\n    async createUser(userData) {\n        const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.create({\n            data: {\n                email: userData.email,\n                name: userData.name,\n                street: userData.address.street,\n                city: userData.address.city,\n                state: userData.address.state,\n                zipCode: userData.address.zipCode,\n                country: userData.address.country,\n                phone: userData.phone\n            }\n        });\n        return this.formatUser(user);\n    }\n    async getUserByEmail(email) {\n        const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        return user ? this.formatUser(user) : null;\n    }\n    async getUserById(id) {\n        const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id\n            }\n        });\n        return user ? this.formatUser(user) : null;\n    }\n    async updateUser(id, updates) {\n        try {\n            const updateData = {};\n            if (updates.email) updateData.email = updates.email;\n            if (updates.name) updateData.name = updates.name;\n            if (updates.phone !== undefined) updateData.phone = updates.phone;\n            if (updates.address) {\n                updateData.street = updates.address.street;\n                updateData.city = updates.address.city;\n                updateData.state = updates.address.state;\n                updateData.zipCode = updates.address.zipCode;\n                updateData.country = updates.address.country;\n            }\n            const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n                where: {\n                    id\n                },\n                data: updateData\n            });\n            return this.formatUser(user);\n        } catch (error) {\n            console.error('Error updating user:', error);\n            return null;\n        }\n    }\n    // Bet operations\n    async createBet(betData) {\n        const bet = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.create({\n            data: {\n                userId: betData.userId,\n                productName: betData.product.name,\n                productPrice: betData.product.price,\n                productCurrency: betData.product.currency,\n                productUrl: betData.product.url,\n                productImage: betData.product.image,\n                stakeAmount: betData.stakeAmount,\n                probability: betData.probability,\n                won: betData.won,\n                betTimestamp: betData.betTimestamp\n            }\n        });\n        return this.formatBet(bet);\n    }\n    async getBetById(id) {\n        const bet = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findUnique({\n            where: {\n                id\n            }\n        });\n        return bet ? this.formatBet(bet) : null;\n    }\n    async getBetsByUserId(userId) {\n        const bets = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findMany({\n            where: {\n                userId\n            },\n            orderBy: {\n                betTimestamp: 'desc'\n            }\n        });\n        return bets.map(this.formatBet);\n    }\n    async getAllBets() {\n        const bets = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findMany({\n            orderBy: {\n                betTimestamp: 'desc'\n            }\n        });\n        return bets.map(this.formatBet);\n    }\n    // Win operations\n    async createWin(winData) {\n        const win = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.create({\n            data: {\n                userId: winData.userId,\n                productName: winData.product.name,\n                productPrice: winData.product.price,\n                productCurrency: winData.product.currency,\n                productUrl: winData.product.url,\n                productImage: winData.product.image,\n                stakeAmount: winData.stakeAmount,\n                probability: winData.probability,\n                status: this.mapStatusToPrisma(winData.status),\n                orderNumber: winData.orderDetails?.orderNumber,\n                trackingNumber: winData.orderDetails?.trackingNumber,\n                estimatedDelivery: winData.orderDetails?.estimatedDelivery,\n                actualDelivery: winData.orderDetails?.actualDelivery,\n                notes: winData.orderDetails?.notes,\n                winTimestamp: winData.winTimestamp\n            }\n        });\n        return this.formatWin(win);\n    }\n    async getWinById(id) {\n        const win = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findUnique({\n            where: {\n                id\n            }\n        });\n        return win ? this.formatWin(win) : null;\n    }\n    async getWinsByUserId(userId) {\n        const wins = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findMany({\n            where: {\n                userId\n            },\n            orderBy: {\n                winTimestamp: 'desc'\n            }\n        });\n        return wins.map(this.formatWin);\n    }\n    async getAllWins() {\n        const wins = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findMany({\n            orderBy: {\n                winTimestamp: 'desc'\n            }\n        });\n        return wins.map(this.formatWin);\n    }\n    async updateWin(id, updates) {\n        try {\n            const updateData = {};\n            if (updates.status) updateData.status = this.mapStatusToPrisma(updates.status);\n            if (updates.orderDetails) {\n                if (updates.orderDetails.orderNumber !== undefined) updateData.orderNumber = updates.orderDetails.orderNumber;\n                if (updates.orderDetails.trackingNumber !== undefined) updateData.trackingNumber = updates.orderDetails.trackingNumber;\n                if (updates.orderDetails.estimatedDelivery !== undefined) updateData.estimatedDelivery = updates.orderDetails.estimatedDelivery;\n                if (updates.orderDetails.actualDelivery !== undefined) updateData.actualDelivery = updates.orderDetails.actualDelivery;\n                if (updates.orderDetails.notes !== undefined) updateData.notes = updates.orderDetails.notes;\n            }\n            const win = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.update({\n                where: {\n                    id\n                },\n                data: updateData\n            });\n            return this.formatWin(win);\n        } catch (error) {\n            console.error('Error updating win:', error);\n            return null;\n        }\n    }\n    // Statistics\n    async getStatistics() {\n        const [users, bets, wins] = await Promise.all([\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.count(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.findMany(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.findMany()\n        ]);\n        const totalStakesCollected = bets.reduce((sum, bet)=>sum + bet.stakeAmount, 0);\n        const totalValuePaidOut = wins.reduce((sum, win)=>sum + win.productPrice, 0);\n        const profitLoss = totalStakesCollected - totalValuePaidOut;\n        const totalBets = bets.length;\n        const winningBets = bets.filter((b)=>b.won).length;\n        const losingBets = bets.filter((b)=>!b.won).length;\n        const winRate = totalBets > 0 ? winningBets / totalBets * 100 : 0;\n        return {\n            totalUsers: users,\n            totalBets,\n            winningBets,\n            losingBets,\n            winRate: parseFloat(winRate.toFixed(2)),\n            totalWins: wins.length,\n            pendingWins: wins.filter((w)=>w.status === 'PENDING').length,\n            processingWins: wins.filter((w)=>w.status === 'PROCESSING').length,\n            orderedWins: wins.filter((w)=>w.status === 'ORDERED').length,\n            shippedWins: wins.filter((w)=>w.status === 'SHIPPED').length,\n            deliveredWins: wins.filter((w)=>w.status === 'DELIVERED').length,\n            totalStakesCollected,\n            totalValuePaidOut,\n            profitLoss\n        };\n    }\n    // Reset data (for development/testing)\n    async reset() {\n        await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$transaction([\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.bet.deleteMany(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.win.deleteMany(),\n            _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.deleteMany()\n        ]);\n    }\n    // Helper methods to format data\n    formatUser(user) {\n        return {\n            id: user.id,\n            email: user.email,\n            name: user.name,\n            address: {\n                street: user.street,\n                city: user.city,\n                state: user.state,\n                zipCode: user.zipCode,\n                country: user.country\n            },\n            phone: user.phone,\n            createdAt: user.createdAt,\n            updatedAt: user.updatedAt\n        };\n    }\n    formatBet(bet) {\n        return {\n            id: bet.id,\n            userId: bet.userId,\n            product: {\n                name: bet.productName,\n                price: bet.productPrice,\n                currency: bet.productCurrency,\n                url: bet.productUrl,\n                image: bet.productImage\n            },\n            stakeAmount: bet.stakeAmount,\n            probability: bet.probability,\n            won: bet.won,\n            betTimestamp: bet.betTimestamp,\n            createdAt: bet.createdAt,\n            updatedAt: bet.updatedAt\n        };\n    }\n    formatWin(win) {\n        try {\n            return {\n                id: win.id,\n                userId: win.userId,\n                product: {\n                    name: win.productName,\n                    price: win.productPrice,\n                    currency: win.productCurrency,\n                    url: win.productUrl,\n                    image: win.productImage\n                },\n                stakeAmount: win.stakeAmount,\n                probability: win.probability,\n                status: win.status ? win.status.toLowerCase() : 'pending',\n                orderDetails: {\n                    orderNumber: win.orderNumber || null,\n                    trackingNumber: win.trackingNumber || null,\n                    estimatedDelivery: win.estimatedDelivery || null,\n                    actualDelivery: win.actualDelivery || null,\n                    notes: win.notes || null\n                },\n                winTimestamp: win.winTimestamp,\n                createdAt: win.createdAt,\n                updatedAt: win.updatedAt\n            };\n        } catch (error) {\n            console.error('Error formatting win:', error, 'Win data:', win);\n            throw error;\n        }\n    }\n    mapStatusToPrisma(status) {\n        return status.toUpperCase().replace(/-/g, '_');\n    }\n    mapStatusFromPrisma(status) {\n        // Convert Prisma enum values to lowercase\n        const mapped = status.toLowerCase();\n        console.log('Mapping status from Prisma:', status, 'to:', mapped);\n        return mapped;\n    }\n}\n// Export singleton instance\nconst prismaDb = new PrismaDatabase();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YyxJQUFJO29CQUN0Q0MsT0FBT1IsSUFBSVEsS0FBSyxJQUFJO2dCQUN0QjtnQkFDQUMsY0FBY1QsSUFBSVMsWUFBWTtnQkFDOUJxQyxXQUFXOUMsSUFBSThDLFNBQVM7Z0JBQ3hCQyxXQUFXL0MsSUFBSStDLFNBQVM7WUFDMUI7UUFDRixFQUFFLE9BQU83RSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBLE9BQU8sYUFBYThCO1lBQzNELE1BQU05QjtRQUNSO0lBQ0Y7SUFFUWdDLGtCQUFrQkQsTUFBYyxFQUFPO1FBQzdDLE9BQU9BLE9BQU9nRCxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxNQUFNO0lBQzVDO0lBRVFDLG9CQUFvQmxELE1BQWMsRUFBaUI7UUFDekQsMENBQTBDO1FBQzFDLE1BQU1tRCxTQUFTbkQsT0FBTytDLFdBQVc7UUFDakM3RSxRQUFRa0YsR0FBRyxDQUFDLCtCQUErQnBELFFBQVEsT0FBT21EO1FBQzFELE9BQU9BO0lBQ1Q7QUFDRjtBQUVBLDRCQUE0QjtBQUNyQixNQUFNRSxXQUFXLElBQUk5RyxpQkFBaUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYW1jaG91L1N3ZWVwc3Rha2VzIEdvb2dsZSBFeHRlbnNpb24vc2hvcHNwaW4tc2VydmVyL3NyYy9saWIvZGF0YWJhc2UtcHJpc21hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4vcHJpc21hJztcbmltcG9ydCB7IFVzZXIsIFdpbiwgQmV0IH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBQcmlzbWFEYXRhYmFzZSB7XG4gIC8vIFVzZXIgb3BlcmF0aW9uc1xuICBhc3luYyBjcmVhdGVVc2VyKHVzZXJEYXRhOiBPbWl0PFVzZXIsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8VXNlcj4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBlbWFpbDogdXNlckRhdGEuZW1haWwsXG4gICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgIHN0cmVldDogdXNlckRhdGEuYWRkcmVzcy5zdHJlZXQsXG4gICAgICAgIGNpdHk6IHVzZXJEYXRhLmFkZHJlc3MuY2l0eSxcbiAgICAgICAgc3RhdGU6IHVzZXJEYXRhLmFkZHJlc3Muc3RhdGUsXG4gICAgICAgIHppcENvZGU6IHVzZXJEYXRhLmFkZHJlc3MuemlwQ29kZSxcbiAgICAgICAgY291bnRyeTogdXNlckRhdGEuYWRkcmVzcy5jb3VudHJ5LFxuICAgICAgICBwaG9uZTogdXNlckRhdGEucGhvbmUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0VXNlcih1c2VyKTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgZW1haWwgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB1c2VyID8gdGhpcy5mb3JtYXRVc2VyKHVzZXIpIDogbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB1c2VyID8gdGhpcy5mb3JtYXRVc2VyKHVzZXIpIDogbnVsbDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PFVzZXIsICdpZCcgfCAnY3JlYXRlZEF0Jz4+KTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKHVwZGF0ZXMuZW1haWwpIHVwZGF0ZURhdGEuZW1haWwgPSB1cGRhdGVzLmVtYWlsO1xuICAgICAgaWYgKHVwZGF0ZXMubmFtZSkgdXBkYXRlRGF0YS5uYW1lID0gdXBkYXRlcy5uYW1lO1xuICAgICAgaWYgKHVwZGF0ZXMucGhvbmUgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5waG9uZSA9IHVwZGF0ZXMucGhvbmU7XG4gICAgICBcbiAgICAgIGlmICh1cGRhdGVzLmFkZHJlc3MpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5zdHJlZXQgPSB1cGRhdGVzLmFkZHJlc3Muc3RyZWV0O1xuICAgICAgICB1cGRhdGVEYXRhLmNpdHkgPSB1cGRhdGVzLmFkZHJlc3MuY2l0eTtcbiAgICAgICAgdXBkYXRlRGF0YS5zdGF0ZSA9IHVwZGF0ZXMuYWRkcmVzcy5zdGF0ZTtcbiAgICAgICAgdXBkYXRlRGF0YS56aXBDb2RlID0gdXBkYXRlcy5hZGRyZXNzLnppcENvZGU7XG4gICAgICAgIHVwZGF0ZURhdGEuY291bnRyeSA9IHVwZGF0ZXMuYWRkcmVzcy5jb3VudHJ5O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRVc2VyKHVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIEJldCBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZUJldChiZXREYXRhOiBPbWl0PEJldCwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxCZXQ+IHtcbiAgICBjb25zdCBiZXQgPSBhd2FpdCBwcmlzbWEuYmV0LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZDogYmV0RGF0YS51c2VySWQsXG4gICAgICAgIHByb2R1Y3ROYW1lOiBiZXREYXRhLnByb2R1Y3QubmFtZSxcbiAgICAgICAgcHJvZHVjdFByaWNlOiBiZXREYXRhLnByb2R1Y3QucHJpY2UsXG4gICAgICAgIHByb2R1Y3RDdXJyZW5jeTogYmV0RGF0YS5wcm9kdWN0LmN1cnJlbmN5LFxuICAgICAgICBwcm9kdWN0VXJsOiBiZXREYXRhLnByb2R1Y3QudXJsLFxuICAgICAgICBwcm9kdWN0SW1hZ2U6IGJldERhdGEucHJvZHVjdC5pbWFnZSxcbiAgICAgICAgc3Rha2VBbW91bnQ6IGJldERhdGEuc3Rha2VBbW91bnQsXG4gICAgICAgIHByb2JhYmlsaXR5OiBiZXREYXRhLnByb2JhYmlsaXR5LFxuICAgICAgICB3b246IGJldERhdGEud29uLFxuICAgICAgICBiZXRUaW1lc3RhbXA6IGJldERhdGEuYmV0VGltZXN0YW1wLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmZvcm1hdEJldChiZXQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0QmV0QnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxCZXQgfCBudWxsPiB7XG4gICAgY29uc3QgYmV0ID0gYXdhaXQgcHJpc21hLmJldC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gYmV0ID8gdGhpcy5mb3JtYXRCZXQoYmV0KSA6IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRCZXRzQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEJldFtdPiB7XG4gICAgY29uc3QgYmV0cyA9IGF3YWl0IHByaXNtYS5iZXQuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBvcmRlckJ5OiB7IGJldFRpbWVzdGFtcDogJ2Rlc2MnIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gYmV0cy5tYXAodGhpcy5mb3JtYXRCZXQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsQmV0cygpOiBQcm9taXNlPEJldFtdPiB7XG4gICAgY29uc3QgYmV0cyA9IGF3YWl0IHByaXNtYS5iZXQuZmluZE1hbnkoe1xuICAgICAgb3JkZXJCeTogeyBiZXRUaW1lc3RhbXA6ICdkZXNjJyB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGJldHMubWFwKHRoaXMuZm9ybWF0QmV0KTtcbiAgfVxuXG4gIC8vIFdpbiBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZVdpbih3aW5EYXRhOiBPbWl0PFdpbiwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxXaW4+IHtcbiAgICBjb25zdCB3aW4gPSBhd2FpdCBwcmlzbWEud2luLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZDogd2luRGF0YS51c2VySWQsXG4gICAgICAgIHByb2R1Y3ROYW1lOiB3aW5EYXRhLnByb2R1Y3QubmFtZSxcbiAgICAgICAgcHJvZHVjdFByaWNlOiB3aW5EYXRhLnByb2R1Y3QucHJpY2UsXG4gICAgICAgIHByb2R1Y3RDdXJyZW5jeTogd2luRGF0YS5wcm9kdWN0LmN1cnJlbmN5LFxuICAgICAgICBwcm9kdWN0VXJsOiB3aW5EYXRhLnByb2R1Y3QudXJsLFxuICAgICAgICBwcm9kdWN0SW1hZ2U6IHdpbkRhdGEucHJvZHVjdC5pbWFnZSxcbiAgICAgICAgc3Rha2VBbW91bnQ6IHdpbkRhdGEuc3Rha2VBbW91bnQsXG4gICAgICAgIHByb2JhYmlsaXR5OiB3aW5EYXRhLnByb2JhYmlsaXR5LFxuICAgICAgICBzdGF0dXM6IHRoaXMubWFwU3RhdHVzVG9QcmlzbWEod2luRGF0YS5zdGF0dXMpLFxuICAgICAgICBvcmRlck51bWJlcjogd2luRGF0YS5vcmRlckRldGFpbHM/Lm9yZGVyTnVtYmVyLFxuICAgICAgICB0cmFja2luZ051bWJlcjogd2luRGF0YS5vcmRlckRldGFpbHM/LnRyYWNraW5nTnVtYmVyLFxuICAgICAgICBlc3RpbWF0ZWREZWxpdmVyeTogd2luRGF0YS5vcmRlckRldGFpbHM/LmVzdGltYXRlZERlbGl2ZXJ5LFxuICAgICAgICBhY3R1YWxEZWxpdmVyeTogd2luRGF0YS5vcmRlckRldGFpbHM/LmFjdHVhbERlbGl2ZXJ5LFxuICAgICAgICBub3Rlczogd2luRGF0YS5vcmRlckRldGFpbHM/Lm5vdGVzLFxuICAgICAgICB3aW5UaW1lc3RhbXA6IHdpbkRhdGEud2luVGltZXN0YW1wLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmZvcm1hdFdpbih3aW4pO1xuICB9XG5cbiAgYXN5bmMgZ2V0V2luQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxXaW4gfCBudWxsPiB7XG4gICAgY29uc3Qgd2luID0gYXdhaXQgcHJpc21hLndpbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gd2luID8gdGhpcy5mb3JtYXRXaW4od2luKSA6IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRXaW5zQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFdpbltdPiB7XG4gICAgY29uc3Qgd2lucyA9IGF3YWl0IHByaXNtYS53aW4uZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBvcmRlckJ5OiB7IHdpblRpbWVzdGFtcDogJ2Rlc2MnIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gd2lucy5tYXAodGhpcy5mb3JtYXRXaW4pO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsV2lucygpOiBQcm9taXNlPFdpbltdPiB7XG4gICAgY29uc3Qgd2lucyA9IGF3YWl0IHByaXNtYS53aW4uZmluZE1hbnkoe1xuICAgICAgb3JkZXJCeTogeyB3aW5UaW1lc3RhbXA6ICdkZXNjJyB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHdpbnMubWFwKHRoaXMuZm9ybWF0V2luKTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVdpbihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPE9taXQ8V2luLCAnaWQnIHwgJ2NyZWF0ZWRBdCc+Pik6IFByb21pc2U8V2luIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKHVwZGF0ZXMuc3RhdHVzKSB1cGRhdGVEYXRhLnN0YXR1cyA9IHRoaXMubWFwU3RhdHVzVG9QcmlzbWEodXBkYXRlcy5zdGF0dXMpO1xuICAgICAgXG4gICAgICBpZiAodXBkYXRlcy5vcmRlckRldGFpbHMpIHtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLm9yZGVyTnVtYmVyICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEub3JkZXJOdW1iZXIgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5vcmRlck51bWJlcjtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLnRyYWNraW5nTnVtYmVyICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEudHJhY2tpbmdOdW1iZXIgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy50cmFja2luZ051bWJlcjtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLmVzdGltYXRlZERlbGl2ZXJ5ICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEuZXN0aW1hdGVkRGVsaXZlcnkgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5lc3RpbWF0ZWREZWxpdmVyeTtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLmFjdHVhbERlbGl2ZXJ5ICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEuYWN0dWFsRGVsaXZlcnkgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5hY3R1YWxEZWxpdmVyeTtcbiAgICAgICAgaWYgKHVwZGF0ZXMub3JkZXJEZXRhaWxzLm5vdGVzICE9PSB1bmRlZmluZWQpIFxuICAgICAgICAgIHVwZGF0ZURhdGEubm90ZXMgPSB1cGRhdGVzLm9yZGVyRGV0YWlscy5ub3RlcztcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2luID0gYXdhaXQgcHJpc21hLndpbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhOiB1cGRhdGVEYXRhLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFdpbih3aW4pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3aW46JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gU3RhdGlzdGljc1xuICBhc3luYyBnZXRTdGF0aXN0aWNzKCkge1xuICAgIGNvbnN0IFt1c2VycywgYmV0cywgd2luc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBwcmlzbWEudXNlci5jb3VudCgpLFxuICAgICAgcHJpc21hLmJldC5maW5kTWFueSgpLFxuICAgICAgcHJpc21hLndpbi5maW5kTWFueSgpLFxuICAgIF0pO1xuXG4gICAgY29uc3QgdG90YWxTdGFrZXNDb2xsZWN0ZWQgPSBiZXRzLnJlZHVjZSgoc3VtLCBiZXQpID0+IHN1bSArIGJldC5zdGFrZUFtb3VudCwgMCk7XG4gICAgY29uc3QgdG90YWxWYWx1ZVBhaWRPdXQgPSB3aW5zLnJlZHVjZSgoc3VtLCB3aW4pID0+IHN1bSArIHdpbi5wcm9kdWN0UHJpY2UsIDApO1xuICAgIGNvbnN0IHByb2ZpdExvc3MgPSB0b3RhbFN0YWtlc0NvbGxlY3RlZCAtIHRvdGFsVmFsdWVQYWlkT3V0O1xuICAgIFxuICAgIGNvbnN0IHRvdGFsQmV0cyA9IGJldHMubGVuZ3RoO1xuICAgIGNvbnN0IHdpbm5pbmdCZXRzID0gYmV0cy5maWx0ZXIoYiA9PiBiLndvbikubGVuZ3RoO1xuICAgIGNvbnN0IGxvc2luZ0JldHMgPSBiZXRzLmZpbHRlcihiID0+ICFiLndvbikubGVuZ3RoO1xuICAgIGNvbnN0IHdpblJhdGUgPSB0b3RhbEJldHMgPiAwID8gKHdpbm5pbmdCZXRzIC8gdG90YWxCZXRzKSAqIDEwMCA6IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxVc2VyczogdXNlcnMsXG4gICAgICB0b3RhbEJldHMsXG4gICAgICB3aW5uaW5nQmV0cyxcbiAgICAgIGxvc2luZ0JldHMsXG4gICAgICB3aW5SYXRlOiBwYXJzZUZsb2F0KHdpblJhdGUudG9GaXhlZCgyKSksXG4gICAgICB0b3RhbFdpbnM6IHdpbnMubGVuZ3RoLFxuICAgICAgcGVuZGluZ1dpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdQRU5ESU5HJykubGVuZ3RoLFxuICAgICAgcHJvY2Vzc2luZ1dpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdQUk9DRVNTSU5HJykubGVuZ3RoLFxuICAgICAgb3JkZXJlZFdpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdPUkRFUkVEJykubGVuZ3RoLFxuICAgICAgc2hpcHBlZFdpbnM6IHdpbnMuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdTSElQUEVEJykubGVuZ3RoLFxuICAgICAgZGVsaXZlcmVkV2luczogd2lucy5maWx0ZXIodyA9PiB3LnN0YXR1cyA9PT0gJ0RFTElWRVJFRCcpLmxlbmd0aCxcbiAgICAgIHRvdGFsU3Rha2VzQ29sbGVjdGVkLFxuICAgICAgdG90YWxWYWx1ZVBhaWRPdXQsXG4gICAgICBwcm9maXRMb3NzLFxuICAgIH07XG4gIH1cblxuICAvLyBSZXNldCBkYXRhIChmb3IgZGV2ZWxvcG1lbnQvdGVzdGluZylcbiAgYXN5bmMgcmVzZXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihbXG4gICAgICBwcmlzbWEuYmV0LmRlbGV0ZU1hbnkoKSxcbiAgICAgIHByaXNtYS53aW4uZGVsZXRlTWFueSgpLFxuICAgICAgcHJpc21hLnVzZXIuZGVsZXRlTWFueSgpLFxuICAgIF0pO1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZHMgdG8gZm9ybWF0IGRhdGFcbiAgcHJpdmF0ZSBmb3JtYXRVc2VyKHVzZXI6IGFueSk6IFVzZXIge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdXNlci5pZCxcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgYWRkcmVzczoge1xuICAgICAgICBzdHJlZXQ6IHVzZXIuc3RyZWV0LFxuICAgICAgICBjaXR5OiB1c2VyLmNpdHksXG4gICAgICAgIHN0YXRlOiB1c2VyLnN0YXRlLFxuICAgICAgICB6aXBDb2RlOiB1c2VyLnppcENvZGUsXG4gICAgICAgIGNvdW50cnk6IHVzZXIuY291bnRyeSxcbiAgICAgIH0sXG4gICAgICBwaG9uZTogdXNlci5waG9uZSxcbiAgICAgIGNyZWF0ZWRBdDogdXNlci5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IHVzZXIudXBkYXRlZEF0LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEJldChiZXQ6IGFueSk6IEJldCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBiZXQuaWQsXG4gICAgICB1c2VySWQ6IGJldC51c2VySWQsXG4gICAgICBwcm9kdWN0OiB7XG4gICAgICAgIG5hbWU6IGJldC5wcm9kdWN0TmFtZSxcbiAgICAgICAgcHJpY2U6IGJldC5wcm9kdWN0UHJpY2UsXG4gICAgICAgIGN1cnJlbmN5OiBiZXQucHJvZHVjdEN1cnJlbmN5LFxuICAgICAgICB1cmw6IGJldC5wcm9kdWN0VXJsLFxuICAgICAgICBpbWFnZTogYmV0LnByb2R1Y3RJbWFnZSxcbiAgICAgIH0sXG4gICAgICBzdGFrZUFtb3VudDogYmV0LnN0YWtlQW1vdW50LFxuICAgICAgcHJvYmFiaWxpdHk6IGJldC5wcm9iYWJpbGl0eSxcbiAgICAgIHdvbjogYmV0LndvbixcbiAgICAgIGJldFRpbWVzdGFtcDogYmV0LmJldFRpbWVzdGFtcCxcbiAgICAgIGNyZWF0ZWRBdDogYmV0LmNyZWF0ZWRBdCxcbiAgICAgIHVwZGF0ZWRBdDogYmV0LnVwZGF0ZWRBdCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRXaW4od2luOiBhbnkpOiBXaW4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogd2luLmlkLFxuICAgICAgICB1c2VySWQ6IHdpbi51c2VySWQsXG4gICAgICAgIHByb2R1Y3Q6IHtcbiAgICAgICAgICBuYW1lOiB3aW4ucHJvZHVjdE5hbWUsXG4gICAgICAgICAgcHJpY2U6IHdpbi5wcm9kdWN0UHJpY2UsXG4gICAgICAgICAgY3VycmVuY3k6IHdpbi5wcm9kdWN0Q3VycmVuY3ksXG4gICAgICAgICAgdXJsOiB3aW4ucHJvZHVjdFVybCxcbiAgICAgICAgICBpbWFnZTogd2luLnByb2R1Y3RJbWFnZSxcbiAgICAgICAgfSxcbiAgICAgICAgc3Rha2VBbW91bnQ6IHdpbi5zdGFrZUFtb3VudCxcbiAgICAgICAgcHJvYmFiaWxpdHk6IHdpbi5wcm9iYWJpbGl0eSxcbiAgICAgICAgc3RhdHVzOiB3aW4uc3RhdHVzID8gd2luLnN0YXR1cy50b0xvd2VyQ2FzZSgpIDogJ3BlbmRpbmcnLFxuICAgICAgICBvcmRlckRldGFpbHM6IHtcbiAgICAgICAgICBvcmRlck51bWJlcjogd2luLm9yZGVyTnVtYmVyIHx8IG51bGwsXG4gICAgICAgICAgdHJhY2tpbmdOdW1iZXI6IHdpbi50cmFja2luZ051bWJlciB8fCBudWxsLFxuICAgICAgICAgIGVzdGltYXRlZERlbGl2ZXJ5OiB3aW4uZXN0aW1hdGVkRGVsaXZlcnkgfHwgbnVsbCxcbiAgICAgICAgICBhY3R1YWxEZWxpdmVyeTogd2luLmFjdHVhbERlbGl2ZXJ5IHx8IG51bGwsXG4gICAgICAgICAgbm90ZXM6IHdpbi5ub3RlcyB8fCBudWxsLFxuICAgICAgICB9LFxuICAgICAgICB3aW5UaW1lc3RhbXA6IHdpbi53aW5UaW1lc3RhbXAsXG4gICAgICAgIGNyZWF0ZWRBdDogd2luLmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiB3aW4udXBkYXRlZEF0LFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZm9ybWF0dGluZyB3aW46JywgZXJyb3IsICdXaW4gZGF0YTonLCB3aW4pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtYXBTdGF0dXNUb1ByaXNtYShzdGF0dXM6IHN0cmluZyk6IGFueSB7XG4gICAgcmV0dXJuIHN0YXR1cy50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoLy0vZywgJ18nKTtcbiAgfVxuXG4gIHByaXZhdGUgbWFwU3RhdHVzRnJvbVByaXNtYShzdGF0dXM6IHN0cmluZyk6IFdpblsnc3RhdHVzJ10ge1xuICAgIC8vIENvbnZlcnQgUHJpc21hIGVudW0gdmFsdWVzIHRvIGxvd2VyY2FzZVxuICAgIGNvbnN0IG1hcHBlZCA9IHN0YXR1cy50b0xvd2VyQ2FzZSgpIGFzIFdpblsnc3RhdHVzJ107XG4gICAgY29uc29sZS5sb2coJ01hcHBpbmcgc3RhdHVzIGZyb20gUHJpc21hOicsIHN0YXR1cywgJ3RvOicsIG1hcHBlZCk7XG4gICAgcmV0dXJuIG1hcHBlZDtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcHJpc21hRGIgPSBuZXcgUHJpc21hRGF0YWJhc2UoKTsiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hRGF0YWJhc2UiLCJjcmVhdGVVc2VyIiwidXNlckRhdGEiLCJ1c2VyIiwiY3JlYXRlIiwiZGF0YSIsImVtYWlsIiwibmFtZSIsInN0cmVldCIsImFkZHJlc3MiLCJjaXR5Iiwic3RhdGUiLCJ6aXBDb2RlIiwiY291bnRyeSIsInBob25lIiwiZm9ybWF0VXNlciIsImdldFVzZXJCeUVtYWlsIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZ2V0VXNlckJ5SWQiLCJpZCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwidXBkYXRlRGF0YSIsInVuZGVmaW5lZCIsInVwZGF0ZSIsImVycm9yIiwiY29uc29sZSIsImNyZWF0ZUJldCIsImJldERhdGEiLCJiZXQiLCJ1c2VySWQiLCJwcm9kdWN0TmFtZSIsInByb2R1Y3QiLCJwcm9kdWN0UHJpY2UiLCJwcmljZSIsInByb2R1Y3RDdXJyZW5jeSIsImN1cnJlbmN5IiwicHJvZHVjdFVybCIsInVybCIsInByb2R1Y3RJbWFnZSIsImltYWdlIiwic3Rha2VBbW91bnQiLCJwcm9iYWJpbGl0eSIsIndvbiIsImJldFRpbWVzdGFtcCIsImZvcm1hdEJldCIsImdldEJldEJ5SWQiLCJnZXRCZXRzQnlVc2VySWQiLCJiZXRzIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwibWFwIiwiZ2V0QWxsQmV0cyIsImNyZWF0ZVdpbiIsIndpbkRhdGEiLCJ3aW4iLCJzdGF0dXMiLCJtYXBTdGF0dXNUb1ByaXNtYSIsIm9yZGVyTnVtYmVyIiwib3JkZXJEZXRhaWxzIiwidHJhY2tpbmdOdW1iZXIiLCJlc3RpbWF0ZWREZWxpdmVyeSIsImFjdHVhbERlbGl2ZXJ5Iiwibm90ZXMiLCJ3aW5UaW1lc3RhbXAiLCJmb3JtYXRXaW4iLCJnZXRXaW5CeUlkIiwiZ2V0V2luc0J5VXNlcklkIiwid2lucyIsImdldEFsbFdpbnMiLCJ1cGRhdGVXaW4iLCJnZXRTdGF0aXN0aWNzIiwidXNlcnMiLCJQcm9taXNlIiwiYWxsIiwiY291bnQiLCJ0b3RhbFN0YWtlc0NvbGxlY3RlZCIsInJlZHVjZSIsInN1bSIsInRvdGFsVmFsdWVQYWlkT3V0IiwicHJvZml0TG9zcyIsInRvdGFsQmV0cyIsImxlbmd0aCIsIndpbm5pbmdCZXRzIiwiZmlsdGVyIiwiYiIsImxvc2luZ0JldHMiLCJ3aW5SYXRlIiwidG90YWxVc2VycyIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwidG90YWxXaW5zIiwicGVuZGluZ1dpbnMiLCJ3IiwicHJvY2Vzc2luZ1dpbnMiLCJvcmRlcmVkV2lucyIsInNoaXBwZWRXaW5zIiwiZGVsaXZlcmVkV2lucyIsInJlc2V0IiwiJHRyYW5zYWN0aW9uIiwiZGVsZXRlTWFueSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJyZXBsYWNlIiwibWFwU3RhdHVzRnJvbVByaXNtYSIsIm1hcHBlZCIsImxvZyIsInByaXNtYURiIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database-prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        'query'\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBSztRQUFDO0tBQVE7QUFDaEIsR0FBRTtBQUVKLElBQUlDLElBQXFDLEVBQUVKLGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsiL1VzZXJzL3NhbWNob3UvU3dlZXBzdGFrZXMgR29vZ2xlIEV4dGVuc2lvbi9zaG9wc3Bpbi1zZXJ2ZXIvc3JjL2xpYi9wcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/XG4gIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzogWydxdWVyeSddLFxuICB9KVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rateLimit.ts":
/*!******************************!*\
  !*** ./src/lib/rateLimit.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminRateLimiter: () => (/* binding */ adminRateLimiter),\n/* harmony export */   betRateLimiter: () => (/* binding */ betRateLimiter),\n/* harmony export */   getClientIP: () => (/* binding */ getClientIP),\n/* harmony export */   userCreationRateLimiter: () => (/* binding */ userCreationRateLimiter)\n/* harmony export */ });\n// Rate limiting utilities\nclass RateLimiter {\n    constructor(maxAttempts, windowMs){\n        this.attempts = new Map();\n        this.maxAttempts = maxAttempts;\n        this.windowMs = windowMs;\n    }\n    isRateLimited(identifier) {\n        const now = Date.now();\n        const entry = this.attempts.get(identifier);\n        if (!entry || now > entry.resetTime) {\n            // Reset or create new entry\n            this.attempts.set(identifier, {\n                count: 1,\n                resetTime: now + this.windowMs\n            });\n            return false;\n        }\n        if (entry.count >= this.maxAttempts) {\n            return true;\n        }\n        // Increment count\n        entry.count++;\n        return false;\n    }\n    getRemainingAttempts(identifier) {\n        const entry = this.attempts.get(identifier);\n        if (!entry || Date.now() > entry.resetTime) {\n            return this.maxAttempts;\n        }\n        return Math.max(0, this.maxAttempts - entry.count);\n    }\n    getResetTime(identifier) {\n        const entry = this.attempts.get(identifier);\n        if (!entry || Date.now() > entry.resetTime) {\n            return Date.now();\n        }\n        return entry.resetTime;\n    }\n    // Clean up old entries periodically\n    cleanup() {\n        const now = Date.now();\n        for (const [key, entry] of this.attempts.entries()){\n            if (now > entry.resetTime) {\n                this.attempts.delete(key);\n            }\n        }\n    }\n}\n// Different rate limiters for different operations\nconst betRateLimiter = new RateLimiter(10, 60 * 60 * 1000); // 10 bets per hour\nconst userCreationRateLimiter = new RateLimiter(3, 60 * 60 * 1000); // 3 user creations per hour\nconst adminRateLimiter = new RateLimiter(100, 60 * 60 * 1000); // 100 admin actions per hour\n// Clean up old entries every 10 minutes\nsetInterval(()=>{\n    betRateLimiter.cleanup();\n    userCreationRateLimiter.cleanup();\n    adminRateLimiter.cleanup();\n}, 10 * 60 * 1000);\nfunction getClientIP(request) {\n    // Try to get real IP from various headers\n    const forwarded = request.headers.get('x-forwarded-for');\n    const realIP = request.headers.get('x-real-ip');\n    const clientIP = request.headers.get('x-client-ip');\n    if (forwarded) {\n        return forwarded.split(',')[0].trim();\n    }\n    if (realIP) {\n        return realIP;\n    }\n    if (clientIP) {\n        return clientIP;\n    }\n    // Fallback to a default for local development\n    return 'unknown';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUgsUUFBUTtRQUNWLE9BQU9BO0lBQ1Q7SUFFQSxJQUFJQyxVQUFVO1FBQ1osT0FBT0E7SUFDVDtJQUVBLDhDQUE4QztJQUM5QyxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYW1jaG91L1N3ZWVwc3Rha2VzIEdvb2dsZSBFeHRlbnNpb24vc2hvcHNwaW4tc2VydmVyL3NyYy9saWIvcmF0ZUxpbWl0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJhdGUgbGltaXRpbmcgdXRpbGl0aWVzXG5cbmludGVyZmFjZSBSYXRlTGltaXRFbnRyeSB7XG4gIGNvdW50OiBudW1iZXI7XG4gIHJlc2V0VGltZTogbnVtYmVyO1xufVxuXG5jbGFzcyBSYXRlTGltaXRlciB7XG4gIHByaXZhdGUgYXR0ZW1wdHM6IE1hcDxzdHJpbmcsIFJhdGVMaW1pdEVudHJ5PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBtYXhBdHRlbXB0czogbnVtYmVyO1xuICBwcml2YXRlIHdpbmRvd01zOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IobWF4QXR0ZW1wdHM6IG51bWJlciwgd2luZG93TXM6IG51bWJlcikge1xuICAgIHRoaXMubWF4QXR0ZW1wdHMgPSBtYXhBdHRlbXB0cztcbiAgICB0aGlzLndpbmRvd01zID0gd2luZG93TXM7XG4gIH1cblxuICBpc1JhdGVMaW1pdGVkKGlkZW50aWZpZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmF0dGVtcHRzLmdldChpZGVudGlmaWVyKTtcblxuICAgIGlmICghZW50cnkgfHwgbm93ID4gZW50cnkucmVzZXRUaW1lKSB7XG4gICAgICAvLyBSZXNldCBvciBjcmVhdGUgbmV3IGVudHJ5XG4gICAgICB0aGlzLmF0dGVtcHRzLnNldChpZGVudGlmaWVyLCB7XG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgICByZXNldFRpbWU6IG5vdyArIHRoaXMud2luZG93TXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChlbnRyeS5jb3VudCA+PSB0aGlzLm1heEF0dGVtcHRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBJbmNyZW1lbnQgY291bnRcbiAgICBlbnRyeS5jb3VudCsrO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldFJlbWFpbmluZ0F0dGVtcHRzKGlkZW50aWZpZXI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmF0dGVtcHRzLmdldChpZGVudGlmaWVyKTtcbiAgICBpZiAoIWVudHJ5IHx8IERhdGUubm93KCkgPiBlbnRyeS5yZXNldFRpbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLm1heEF0dGVtcHRzO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgdGhpcy5tYXhBdHRlbXB0cyAtIGVudHJ5LmNvdW50KTtcbiAgfVxuXG4gIGdldFJlc2V0VGltZShpZGVudGlmaWVyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5hdHRlbXB0cy5nZXQoaWRlbnRpZmllcik7XG4gICAgaWYgKCFlbnRyeSB8fCBEYXRlLm5vdygpID4gZW50cnkucmVzZXRUaW1lKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgcmV0dXJuIGVudHJ5LnJlc2V0VGltZTtcbiAgfVxuXG4gIC8vIENsZWFuIHVwIG9sZCBlbnRyaWVzIHBlcmlvZGljYWxseVxuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgdGhpcy5hdHRlbXB0cy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChub3cgPiBlbnRyeS5yZXNldFRpbWUpIHtcbiAgICAgICAgdGhpcy5hdHRlbXB0cy5kZWxldGUoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gRGlmZmVyZW50IHJhdGUgbGltaXRlcnMgZm9yIGRpZmZlcmVudCBvcGVyYXRpb25zXG5leHBvcnQgY29uc3QgYmV0UmF0ZUxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoMTAsIDYwICogNjAgKiAxMDAwKTsgLy8gMTAgYmV0cyBwZXIgaG91clxuZXhwb3J0IGNvbnN0IHVzZXJDcmVhdGlvblJhdGVMaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKDMsIDYwICogNjAgKiAxMDAwKTsgLy8gMyB1c2VyIGNyZWF0aW9ucyBwZXIgaG91clxuZXhwb3J0IGNvbnN0IGFkbWluUmF0ZUxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoMTAwLCA2MCAqIDYwICogMTAwMCk7IC8vIDEwMCBhZG1pbiBhY3Rpb25zIHBlciBob3VyXG5cbi8vIENsZWFuIHVwIG9sZCBlbnRyaWVzIGV2ZXJ5IDEwIG1pbnV0ZXNcbnNldEludGVydmFsKCgpID0+IHtcbiAgYmV0UmF0ZUxpbWl0ZXIuY2xlYW51cCgpO1xuICB1c2VyQ3JlYXRpb25SYXRlTGltaXRlci5jbGVhbnVwKCk7XG4gIGFkbWluUmF0ZUxpbWl0ZXIuY2xlYW51cCgpO1xufSwgMTAgKiA2MCAqIDEwMDApO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xpZW50SVAocmVxdWVzdDogUmVxdWVzdCk6IHN0cmluZyB7XG4gIC8vIFRyeSB0byBnZXQgcmVhbCBJUCBmcm9tIHZhcmlvdXMgaGVhZGVyc1xuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKTtcbiAgY29uc3QgcmVhbElQID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1yZWFsLWlwJyk7XG4gIGNvbnN0IGNsaWVudElQID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1jbGllbnQtaXAnKTtcbiAgXG4gIGlmIChmb3J3YXJkZWQpIHtcbiAgICByZXR1cm4gZm9yd2FyZGVkLnNwbGl0KCcsJylbMF0udHJpbSgpO1xuICB9XG4gIFxuICBpZiAocmVhbElQKSB7XG4gICAgcmV0dXJuIHJlYWxJUDtcbiAgfVxuICBcbiAgaWYgKGNsaWVudElQKSB7XG4gICAgcmV0dXJuIGNsaWVudElQO1xuICB9XG4gIFxuICAvLyBGYWxsYmFjayB0byBhIGRlZmF1bHQgZm9yIGxvY2FsIGRldmVsb3BtZW50XG4gIHJldHVybiAndW5rbm93bic7XG59Il0sIm5hbWVzIjpbIlJhdGVMaW1pdGVyIiwiY29uc3RydWN0b3IiLCJtYXhBdHRlbXB0cyIsIndpbmRvd01zIiwiYXR0ZW1wdHMiLCJNYXAiLCJpc1JhdGVMaW1pdGVkIiwiaWRlbnRpZmllciIsIm5vdyIsIkRhdGUiLCJlbnRyeSIsImdldCIsInJlc2V0VGltZSIsInNldCIsImNvdW50IiwiZ2V0UmVtYWluaW5nQXR0ZW1wdHMiLCJNYXRoIiwibWF4IiwiZ2V0UmVzZXRUaW1lIiwiY2xlYW51cCIsImtleSIsImVudHJpZXMiLCJkZWxldGUiLCJiZXRSYXRlTGltaXRlciIsInVzZXJDcmVhdGlvblJhdGVMaW1pdGVyIiwiYWRtaW5SYXRlTGltaXRlciIsInNldEludGVydmFsIiwiZ2V0Q2xpZW50SVAiLCJyZXF1ZXN0IiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsInJlYWxJUCIsImNsaWVudElQIiwic3BsaXQiLCJ0cmltIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rateLimit.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/validation.ts":
/*!*******************************!*\
  !*** ./src/lib/validation.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   sanitizeString: () => (/* binding */ sanitizeString),\n/* harmony export */   validateAddress: () => (/* binding */ validateAddress),\n/* harmony export */   validateEmail: () => (/* binding */ validateEmail),\n/* harmony export */   validateName: () => (/* binding */ validateName),\n/* harmony export */   validatePhone: () => (/* binding */ validatePhone),\n/* harmony export */   validateProbability: () => (/* binding */ validateProbability),\n/* harmony export */   validateProduct: () => (/* binding */ validateProduct),\n/* harmony export */   validateStakeAmount: () => (/* binding */ validateStakeAmount)\n/* harmony export */ });\n// Input validation utilities\nclass ValidationError extends Error {\n    constructor(message){\n        super(message);\n        this.name = 'ValidationError';\n    }\n}\nfunction validateEmail(email) {\n    if (!email || typeof email !== 'string') {\n        throw new ValidationError('Email is required');\n    }\n    if (email.length > 254) {\n        throw new ValidationError('Email is too long');\n    }\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n        throw new ValidationError('Invalid email format');\n    }\n}\nfunction validateName(name) {\n    if (!name || typeof name !== 'string') {\n        throw new ValidationError('Name is required');\n    }\n    if (name.length < 1 || name.length > 100) {\n        throw new ValidationError('Name must be between 1 and 100 characters');\n    }\n    // Basic sanitization - remove potentially harmful characters\n    if (/[<>\\\"'&]/.test(name)) {\n        throw new ValidationError('Name contains invalid characters');\n    }\n}\nfunction validateAddress(address) {\n    if (!address || typeof address !== 'object') {\n        throw new ValidationError('Address is required');\n    }\n    const required = [\n        'street',\n        'city',\n        'state',\n        'zipCode',\n        'country'\n    ];\n    for (const field of required){\n        if (!address[field] || typeof address[field] !== 'string') {\n            throw new ValidationError(`Address ${field} is required`);\n        }\n        if (address[field].length > 100) {\n            throw new ValidationError(`Address ${field} is too long`);\n        }\n        // Basic sanitization\n        if (/[<>\\\"'&]/.test(address[field])) {\n            throw new ValidationError(`Address ${field} contains invalid characters`);\n        }\n    }\n    // Enhanced ZIP code validation by country\n    if (address.country === 'United States') {\n        // US ZIP codes: 12345 or 12345-6789\n        if (!/^\\d{5}(-\\d{4})?$/.test(address.zipCode)) {\n            throw new ValidationError('Invalid US ZIP code format (should be 12345 or 12345-6789)');\n        }\n    } else if (address.country === 'Canada') {\n        // Canadian postal codes: A1A 1A1\n        if (!/^[A-Za-z]\\d[A-Za-z] \\d[A-Za-z]\\d$/.test(address.zipCode)) {\n            throw new ValidationError('Invalid Canadian postal code format (should be A1A 1A1)');\n        }\n    } else {\n        // Generic validation for other countries\n        if (!/^[A-Za-z0-9\\s-]{3,12}$/.test(address.zipCode)) {\n            throw new ValidationError('Invalid postal code format');\n        }\n    }\n    // Enhanced state validation for US addresses\n    if (address.country === 'United States') {\n        const validStates = [\n            'AL',\n            'AK',\n            'AZ',\n            'AR',\n            'CA',\n            'CO',\n            'CT',\n            'DE',\n            'FL',\n            'GA',\n            'HI',\n            'ID',\n            'IL',\n            'IN',\n            'IA',\n            'KS',\n            'KY',\n            'LA',\n            'ME',\n            'MD',\n            'MA',\n            'MI',\n            'MN',\n            'MS',\n            'MO',\n            'MT',\n            'NE',\n            'NV',\n            'NH',\n            'NJ',\n            'NM',\n            'NY',\n            'NC',\n            'ND',\n            'OH',\n            'OK',\n            'OR',\n            'PA',\n            'RI',\n            'SC',\n            'SD',\n            'TN',\n            'TX',\n            'UT',\n            'VT',\n            'VA',\n            'WA',\n            'WV',\n            'WI',\n            'WY',\n            'DC' // District of Columbia\n        ];\n        if (!validStates.includes(address.state.toUpperCase())) {\n            throw new ValidationError('Invalid US state code (use 2-letter abbreviation like CA, NY, TX)');\n        }\n    }\n    // Basic address format validation\n    if (address.street.length < 5) {\n        throw new ValidationError('Street address seems too short to be valid');\n    }\n    if (address.city.length < 2) {\n        throw new ValidationError('City name seems too short to be valid');\n    }\n    // Check for obviously fake addresses\n    const suspiciousPatterns = [\n        /test|fake|invalid|example|dummy/i,\n        /123.*main.*st/i,\n        /111.*111|222.*222|999.*999/i\n    ];\n    for (const pattern of suspiciousPatterns){\n        if (pattern.test(address.street) || pattern.test(address.city)) {\n            throw new ValidationError('Please provide a valid, real address for shipping');\n        }\n    }\n}\nfunction validatePhone(phone) {\n    if (phone) {\n        if (typeof phone !== 'string') {\n            throw new ValidationError('Phone must be a string');\n        }\n        if (phone.length > 20) {\n            throw new ValidationError('Phone number is too long');\n        }\n        // Allow digits, spaces, dashes, parentheses, plus sign\n        if (!/^[\\d\\s\\-\\(\\)\\+]+$/.test(phone)) {\n            throw new ValidationError('Invalid phone number format');\n        }\n    }\n}\nfunction validateStakeAmount(stake, productPrice) {\n    if (typeof stake !== 'number' || isNaN(stake)) {\n        throw new ValidationError('Stake must be a valid number');\n    }\n    if (stake < 0.01) {\n        throw new ValidationError('Minimum stake is $0.01');\n    }\n    if (stake > 10000) {\n        throw new ValidationError('Maximum stake is $10,000');\n    }\n    if (stake > productPrice) {\n        throw new ValidationError('Stake cannot exceed product price');\n    }\n}\nfunction validateProduct(product) {\n    if (!product || typeof product !== 'object') {\n        throw new ValidationError('Product is required');\n    }\n    if (!product.name || typeof product.name !== 'string') {\n        throw new ValidationError('Product name is required');\n    }\n    if (product.name.length > 500) {\n        throw new ValidationError('Product name is too long');\n    }\n    if (typeof product.price !== 'number' || isNaN(product.price)) {\n        throw new ValidationError('Product price must be a valid number');\n    }\n    if (product.price < 0.01 || product.price > 100000) {\n        throw new ValidationError('Product price must be between $0.01 and $100,000');\n    }\n    if (!product.currency || typeof product.currency !== 'string') {\n        throw new ValidationError('Product currency is required');\n    }\n    if (product.currency !== 'USD') {\n        throw new ValidationError('Only USD currency is supported');\n    }\n    if (!product.url || typeof product.url !== 'string') {\n        throw new ValidationError('Product URL is required');\n    }\n    try {\n        new URL(product.url);\n    } catch  {\n        throw new ValidationError('Invalid product URL');\n    }\n    if (product.image && typeof product.image !== 'string') {\n        throw new ValidationError('Product image must be a string');\n    }\n    if (product.image) {\n        try {\n            new URL(product.image);\n        } catch  {\n            throw new ValidationError('Invalid product image URL');\n        }\n    }\n}\nfunction validateProbability(probability) {\n    if (typeof probability !== 'number' || isNaN(probability)) {\n        throw new ValidationError('Probability must be a valid number');\n    }\n    if (probability < 0 || probability > 1) {\n        throw new ValidationError('Probability must be between 0 and 1');\n    }\n}\nfunction sanitizeString(input) {\n    return input.replace(/[<>\\\"'&]/g, '') // Remove potentially harmful characters\n    .trim().slice(0, 1000); // Limit length\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFnQjtJQUM1QjtJQUVBLElBQUk7UUFDRixJQUFJb0MsSUFBSUosUUFBUUcsR0FBRztJQUNyQixFQUFFLE9BQU07UUFDTixNQUFNLElBQUluQyxnQkFBZ0I7SUFDNUI7SUFFQSxJQUFJZ0MsUUFBUUssS0FBSyxJQUFJLE9BQU9MLFFBQVFLLEtBQUssS0FBSyxVQUFVO1FBQ3RELE1BQU0sSUFBSXJDLGdCQUFnQjtJQUM1QjtJQUVBLElBQUlnQyxRQUFRSyxLQUFLLEVBQUU7UUFDakIsSUFBSTtZQUNGLElBQUlELElBQUlKLFFBQVFLLEtBQUs7UUFDdkIsRUFBRSxPQUFNO1lBQ04sTUFBTSxJQUFJckMsZ0JBQWdCO1FBQzVCO0lBQ0Y7QUFDRjtBQUVPLFNBQVNzQyxvQkFBb0JDLFdBQW1CO0lBQ3JELElBQUksT0FBT0EsZ0JBQWdCLFlBQVlULE1BQU1TLGNBQWM7UUFDekQsTUFBTSxJQUFJdkMsZ0JBQWdCO0lBQzVCO0lBRUEsSUFBSXVDLGNBQWMsS0FBS0EsY0FBYyxHQUFHO1FBQ3RDLE1BQU0sSUFBSXZDLGdCQUFnQjtJQUM1QjtBQUNGO0FBRU8sU0FBU3dDLGVBQWVDLEtBQWE7SUFDMUMsT0FBT0EsTUFDSkMsT0FBTyxDQUFDLGFBQWEsSUFBSSx3Q0FBd0M7S0FDakVDLElBQUksR0FDSkMsS0FBSyxDQUFDLEdBQUcsT0FBTyxlQUFlO0FBQ3BDIiwic291cmNlcyI6WyIvVXNlcnMvc2FtY2hvdS9Td2VlcHN0YWtlcyBHb29nbGUgRXh0ZW5zaW9uL3Nob3BzcGluLXNlcnZlci9zcmMvbGliL3ZhbGlkYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW5wdXQgdmFsaWRhdGlvbiB1dGlsaXRpZXNcblxuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ1ZhbGlkYXRpb25FcnJvcic7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWw6IHN0cmluZyk6IHZvaWQge1xuICBpZiAoIWVtYWlsIHx8IHR5cGVvZiBlbWFpbCAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdFbWFpbCBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoZW1haWwubGVuZ3RoID4gMjU0KSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignRW1haWwgaXMgdG9vIGxvbmcnKTtcbiAgfVxuICBcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xuICBpZiAoIWVtYWlsUmVnZXgudGVzdChlbWFpbCkpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdJbnZhbGlkIGVtYWlsIGZvcm1hdCcpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU5hbWUobmFtZTogc3RyaW5nKTogdm9pZCB7XG4gIGlmICghbmFtZSB8fCB0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdOYW1lIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmIChuYW1lLmxlbmd0aCA8IDEgfHwgbmFtZS5sZW5ndGggPiAxMDApIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdOYW1lIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMDAgY2hhcmFjdGVycycpO1xuICB9XG4gIFxuICAvLyBCYXNpYyBzYW5pdGl6YXRpb24gLSByZW1vdmUgcG90ZW50aWFsbHkgaGFybWZ1bCBjaGFyYWN0ZXJzXG4gIGlmICgvWzw+XFxcIicmXS8udGVzdChuYW1lKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ05hbWUgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzJyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQWRkcmVzcyhhZGRyZXNzOiBhbnkpOiB2b2lkIHtcbiAgaWYgKCFhZGRyZXNzIHx8IHR5cGVvZiBhZGRyZXNzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0FkZHJlc3MgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgY29uc3QgcmVxdWlyZWQgPSBbJ3N0cmVldCcsICdjaXR5JywgJ3N0YXRlJywgJ3ppcENvZGUnLCAnY291bnRyeSddO1xuICBmb3IgKGNvbnN0IGZpZWxkIG9mIHJlcXVpcmVkKSB7XG4gICAgaWYgKCFhZGRyZXNzW2ZpZWxkXSB8fCB0eXBlb2YgYWRkcmVzc1tmaWVsZF0gIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBBZGRyZXNzICR7ZmllbGR9IGlzIHJlcXVpcmVkYCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChhZGRyZXNzW2ZpZWxkXS5sZW5ndGggPiAxMDApIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEFkZHJlc3MgJHtmaWVsZH0gaXMgdG9vIGxvbmdgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQmFzaWMgc2FuaXRpemF0aW9uXG4gICAgaWYgKC9bPD5cXFwiJyZdLy50ZXN0KGFkZHJlc3NbZmllbGRdKSkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgQWRkcmVzcyAke2ZpZWxkfSBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnNgKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEVuaGFuY2VkIFpJUCBjb2RlIHZhbGlkYXRpb24gYnkgY291bnRyeVxuICBpZiAoYWRkcmVzcy5jb3VudHJ5ID09PSAnVW5pdGVkIFN0YXRlcycpIHtcbiAgICAvLyBVUyBaSVAgY29kZXM6IDEyMzQ1IG9yIDEyMzQ1LTY3ODlcbiAgICBpZiAoIS9eXFxkezV9KC1cXGR7NH0pPyQvLnRlc3QoYWRkcmVzcy56aXBDb2RlKSkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignSW52YWxpZCBVUyBaSVAgY29kZSBmb3JtYXQgKHNob3VsZCBiZSAxMjM0NSBvciAxMjM0NS02Nzg5KScpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChhZGRyZXNzLmNvdW50cnkgPT09ICdDYW5hZGEnKSB7XG4gICAgLy8gQ2FuYWRpYW4gcG9zdGFsIGNvZGVzOiBBMUEgMUExXG4gICAgaWYgKCEvXltBLVphLXpdXFxkW0EtWmEtel0gXFxkW0EtWmEtel1cXGQkLy50ZXN0KGFkZHJlc3MuemlwQ29kZSkpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0ludmFsaWQgQ2FuYWRpYW4gcG9zdGFsIGNvZGUgZm9ybWF0IChzaG91bGQgYmUgQTFBIDFBMSknKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gR2VuZXJpYyB2YWxpZGF0aW9uIGZvciBvdGhlciBjb3VudHJpZXNcbiAgICBpZiAoIS9eW0EtWmEtejAtOVxccy1dezMsMTJ9JC8udGVzdChhZGRyZXNzLnppcENvZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdJbnZhbGlkIHBvc3RhbCBjb2RlIGZvcm1hdCcpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gRW5oYW5jZWQgc3RhdGUgdmFsaWRhdGlvbiBmb3IgVVMgYWRkcmVzc2VzXG4gIGlmIChhZGRyZXNzLmNvdW50cnkgPT09ICdVbml0ZWQgU3RhdGVzJykge1xuICAgIGNvbnN0IHZhbGlkU3RhdGVzID0gW1xuICAgICAgJ0FMJywgJ0FLJywgJ0FaJywgJ0FSJywgJ0NBJywgJ0NPJywgJ0NUJywgJ0RFJywgJ0ZMJywgJ0dBJyxcbiAgICAgICdISScsICdJRCcsICdJTCcsICdJTicsICdJQScsICdLUycsICdLWScsICdMQScsICdNRScsICdNRCcsXG4gICAgICAnTUEnLCAnTUknLCAnTU4nLCAnTVMnLCAnTU8nLCAnTVQnLCAnTkUnLCAnTlYnLCAnTkgnLCAnTkonLFxuICAgICAgJ05NJywgJ05ZJywgJ05DJywgJ05EJywgJ09IJywgJ09LJywgJ09SJywgJ1BBJywgJ1JJJywgJ1NDJyxcbiAgICAgICdTRCcsICdUTicsICdUWCcsICdVVCcsICdWVCcsICdWQScsICdXQScsICdXVicsICdXSScsICdXWScsXG4gICAgICAnREMnIC8vIERpc3RyaWN0IG9mIENvbHVtYmlhXG4gICAgXTtcbiAgICBcbiAgICBpZiAoIXZhbGlkU3RhdGVzLmluY2x1ZGVzKGFkZHJlc3Muc3RhdGUudG9VcHBlckNhc2UoKSkpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0ludmFsaWQgVVMgc3RhdGUgY29kZSAodXNlIDItbGV0dGVyIGFiYnJldmlhdGlvbiBsaWtlIENBLCBOWSwgVFgpJyk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBCYXNpYyBhZGRyZXNzIGZvcm1hdCB2YWxpZGF0aW9uXG4gIGlmIChhZGRyZXNzLnN0cmVldC5sZW5ndGggPCA1KSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignU3RyZWV0IGFkZHJlc3Mgc2VlbXMgdG9vIHNob3J0IHRvIGJlIHZhbGlkJyk7XG4gIH1cbiAgXG4gIGlmIChhZGRyZXNzLmNpdHkubGVuZ3RoIDwgMikge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0NpdHkgbmFtZSBzZWVtcyB0b28gc2hvcnQgdG8gYmUgdmFsaWQnKTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZm9yIG9idmlvdXNseSBmYWtlIGFkZHJlc3Nlc1xuICBjb25zdCBzdXNwaWNpb3VzUGF0dGVybnMgPSBbXG4gICAgL3Rlc3R8ZmFrZXxpbnZhbGlkfGV4YW1wbGV8ZHVtbXkvaSxcbiAgICAvMTIzLiptYWluLipzdC9pLFxuICAgIC8xMTEuKjExMXwyMjIuKjIyMnw5OTkuKjk5OS9pXG4gIF07XG4gIFxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2Ygc3VzcGljaW91c1BhdHRlcm5zKSB7XG4gICAgaWYgKHBhdHRlcm4udGVzdChhZGRyZXNzLnN0cmVldCkgfHwgcGF0dGVybi50ZXN0KGFkZHJlc3MuY2l0eSkpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1BsZWFzZSBwcm92aWRlIGEgdmFsaWQsIHJlYWwgYWRkcmVzcyBmb3Igc2hpcHBpbmcnKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGhvbmUocGhvbmU/OiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKHBob25lKSB7XG4gICAgaWYgKHR5cGVvZiBwaG9uZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1Bob25lIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHBob25lLmxlbmd0aCA+IDIwKSB7XG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdQaG9uZSBudW1iZXIgaXMgdG9vIGxvbmcnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWxsb3cgZGlnaXRzLCBzcGFjZXMsIGRhc2hlcywgcGFyZW50aGVzZXMsIHBsdXMgc2lnblxuICAgIGlmICghL15bXFxkXFxzXFwtXFwoXFwpXFwrXSskLy50ZXN0KHBob25lKSkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignSW52YWxpZCBwaG9uZSBudW1iZXIgZm9ybWF0Jyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVN0YWtlQW1vdW50KHN0YWtlOiBudW1iZXIsIHByb2R1Y3RQcmljZTogbnVtYmVyKTogdm9pZCB7XG4gIGlmICh0eXBlb2Ygc3Rha2UgIT09ICdudW1iZXInIHx8IGlzTmFOKHN0YWtlKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1N0YWtlIG11c3QgYmUgYSB2YWxpZCBudW1iZXInKTtcbiAgfVxuICBcbiAgaWYgKHN0YWtlIDwgMC4wMSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ01pbmltdW0gc3Rha2UgaXMgJDAuMDEnKTtcbiAgfVxuICBcbiAgaWYgKHN0YWtlID4gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdNYXhpbXVtIHN0YWtlIGlzICQxMCwwMDAnKTtcbiAgfVxuICBcbiAgaWYgKHN0YWtlID4gcHJvZHVjdFByaWNlKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignU3Rha2UgY2Fubm90IGV4Y2VlZCBwcm9kdWN0IHByaWNlJyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUHJvZHVjdChwcm9kdWN0OiBhbnkpOiB2b2lkIHtcbiAgaWYgKCFwcm9kdWN0IHx8IHR5cGVvZiBwcm9kdWN0ICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1Byb2R1Y3QgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKCFwcm9kdWN0Lm5hbWUgfHwgdHlwZW9mIHByb2R1Y3QubmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdQcm9kdWN0IG5hbWUgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKHByb2R1Y3QubmFtZS5sZW5ndGggPiA1MDApIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdQcm9kdWN0IG5hbWUgaXMgdG9vIGxvbmcnKTtcbiAgfVxuICBcbiAgaWYgKHR5cGVvZiBwcm9kdWN0LnByaWNlICE9PSAnbnVtYmVyJyB8fCBpc05hTihwcm9kdWN0LnByaWNlKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1Byb2R1Y3QgcHJpY2UgbXVzdCBiZSBhIHZhbGlkIG51bWJlcicpO1xuICB9XG4gIFxuICBpZiAocHJvZHVjdC5wcmljZSA8IDAuMDEgfHwgcHJvZHVjdC5wcmljZSA+IDEwMDAwMCkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1Byb2R1Y3QgcHJpY2UgbXVzdCBiZSBiZXR3ZWVuICQwLjAxIGFuZCAkMTAwLDAwMCcpO1xuICB9XG4gIFxuICBpZiAoIXByb2R1Y3QuY3VycmVuY3kgfHwgdHlwZW9mIHByb2R1Y3QuY3VycmVuY3kgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignUHJvZHVjdCBjdXJyZW5jeSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAocHJvZHVjdC5jdXJyZW5jeSAhPT0gJ1VTRCcpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdPbmx5IFVTRCBjdXJyZW5jeSBpcyBzdXBwb3J0ZWQnKTtcbiAgfVxuICBcbiAgaWYgKCFwcm9kdWN0LnVybCB8fCB0eXBlb2YgcHJvZHVjdC51cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignUHJvZHVjdCBVUkwgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBuZXcgVVJMKHByb2R1Y3QudXJsKTtcbiAgfSBjYXRjaCB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignSW52YWxpZCBwcm9kdWN0IFVSTCcpO1xuICB9XG4gIFxuICBpZiAocHJvZHVjdC5pbWFnZSAmJiB0eXBlb2YgcHJvZHVjdC5pbWFnZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdQcm9kdWN0IGltYWdlIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuICBcbiAgaWYgKHByb2R1Y3QuaW1hZ2UpIHtcbiAgICB0cnkge1xuICAgICAgbmV3IFVSTChwcm9kdWN0LmltYWdlKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0ludmFsaWQgcHJvZHVjdCBpbWFnZSBVUkwnKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUHJvYmFiaWxpdHkocHJvYmFiaWxpdHk6IG51bWJlcik6IHZvaWQge1xuICBpZiAodHlwZW9mIHByb2JhYmlsaXR5ICE9PSAnbnVtYmVyJyB8fCBpc05hTihwcm9iYWJpbGl0eSkpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdQcm9iYWJpbGl0eSBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyJyk7XG4gIH1cbiAgXG4gIGlmIChwcm9iYWJpbGl0eSA8IDAgfHwgcHJvYmFiaWxpdHkgPiAxKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignUHJvYmFiaWxpdHkgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEnKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBpbnB1dFxuICAgIC5yZXBsYWNlKC9bPD5cXFwiJyZdL2csICcnKSAvLyBSZW1vdmUgcG90ZW50aWFsbHkgaGFybWZ1bCBjaGFyYWN0ZXJzXG4gICAgLnRyaW0oKVxuICAgIC5zbGljZSgwLCAxMDAwKTsgLy8gTGltaXQgbGVuZ3RoXG59Il0sIm5hbWVzIjpbIlZhbGlkYXRpb25FcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwibmFtZSIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsImxlbmd0aCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwidmFsaWRhdGVOYW1lIiwidmFsaWRhdGVBZGRyZXNzIiwiYWRkcmVzcyIsInJlcXVpcmVkIiwiZmllbGQiLCJjb3VudHJ5IiwiemlwQ29kZSIsInZhbGlkU3RhdGVzIiwiaW5jbHVkZXMiLCJzdGF0ZSIsInRvVXBwZXJDYXNlIiwic3RyZWV0IiwiY2l0eSIsInN1c3BpY2lvdXNQYXR0ZXJucyIsInBhdHRlcm4iLCJ2YWxpZGF0ZVBob25lIiwicGhvbmUiLCJ2YWxpZGF0ZVN0YWtlQW1vdW50Iiwic3Rha2UiLCJwcm9kdWN0UHJpY2UiLCJpc05hTiIsInZhbGlkYXRlUHJvZHVjdCIsInByb2R1Y3QiLCJwcmljZSIsImN1cnJlbmN5IiwidXJsIiwiVVJMIiwiaW1hZ2UiLCJ2YWxpZGF0ZVByb2JhYmlsaXR5IiwicHJvYmFiaWxpdHkiLCJzYW5pdGl6ZVN0cmluZyIsImlucHV0IiwicmVwbGFjZSIsInRyaW0iLCJzbGljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/validation.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fusers%2Froute&page=%2Fapi%2Fusers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fusers%2Froute.ts&appDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsamchou%2FSweepstakes%20Google%20Extension%2Fshopspin-server&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();